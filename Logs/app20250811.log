2025-08-11 07:57:15.453 +00:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7092/api/Auth/activity/ping - null null
2025-08-11 07:57:15.555 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 07:57:15.555 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 07:57:15.885 +00:00 [INF] CORS policy execution successful.
2025-08-11 07:57:15.886 +00:00 [INF] CORS policy execution successful.
2025-08-11 07:57:15.597 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/UserActivity/recent?limit=4 - null null
2025-08-11 07:57:15.885 +00:00 [INF] CORS policy execution successful.
2025-08-11 07:57:15.896 +00:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7092/api/Auth/activity/ping - 204 null null 443.7951ms
2025-08-11 07:57:15.886 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 07:57:15.897 +00:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 07:57:15.576 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 07:57:15.898 +00:00 [INF] CORS policy execution successful.
2025-08-11 07:57:15.898 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 07:57:15.899 +00:00 [INF] Route matched with {action = "GetMyPendingActions", controller = "MaintenanceRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPendingActions(System.String) on controller PersonaXFleet.Controllers.MaintenanceRequestController (PersonaXFleet).
2025-08-11 07:57:15.891 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 07:57:15.898 +00:00 [INF] CORS policy execution successful.
2025-08-11 07:57:15.909 +00:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 07:57:15.909 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.UserActivityController.GetRecentActivities (PersonaXFleet)'
2025-08-11 07:57:15.910 +00:00 [INF] Route matched with {action = "GetRecentActivities", controller = "UserActivity"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentActivities(Int32) on controller PersonaXFleet.Controllers.UserActivityController (PersonaXFleet).
2025-08-11 07:57:16.038 +00:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/activity/ping - application/json 49
2025-08-11 07:57:16.045 +00:00 [INF] CORS policy execution successful.
2025-08-11 07:57:16.045 +00:00 [INF] Executing endpoint 'FleetIdentityServer.Controllers.Auth.PingActivity (PersonaXFleet)'
2025-08-11 07:57:16.045 +00:00 [INF] Route matched with {action = "PingActivity", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PingActivity(FleetIdentityServer.Controllers.PingActivityRequest) on controller FleetIdentityServer.Controllers.Auth (PersonaXFleet).
2025-08-11 07:57:16.052 +00:00 [INF] Executed DbCommand (90ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[ActionLink], [n].[CreatedAt], [n].[IsDeleted], [n].[IsRead], [n].[Message], [n].[RelatedEntityId], [n].[Title], [n].[Type], [n].[UserId], [n].[Username]
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsDeleted] = CAST(0 AS bit)
ORDER BY [n].[CreatedAt] DESC
2025-08-11 07:57:16.052 +00:00 [INF] Executed DbCommand (85ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ActivityType], [t].[Description], [t].[Details], [t].[DurationMs], [t].[EntityId], [t].[EntityType], [t].[ErrorMessage], [t].[IpAddress], [t].[IsSuccessful], [t].[Module], [t].[NewValues], [t].[OldValues], [t].[PageUrl], [t].[SessionId], [t].[Timestamp], [t].[UserAgent], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Department], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsActive], [a].[LastActivityDate], [a].[LastLoginDate], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[MustChangePassword], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [u].[Id], [u].[ActivityType], [u].[Description], [u].[Details], [u].[DurationMs], [u].[EntityId], [u].[EntityType], [u].[ErrorMessage], [u].[IpAddress], [u].[IsSuccessful], [u].[Module], [u].[NewValues], [u].[OldValues], [u].[PageUrl], [u].[SessionId], [u].[Timestamp], [u].[UserAgent], [u].[UserId]
    FROM [UserActivities] AS [u]
    ORDER BY [u].[Timestamp] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
ORDER BY [t].[Timestamp] DESC
2025-08-11 07:57:16.052 +00:00 [INF] Executed DbCommand (152ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsRead] = CAST(0 AS bit) AND [n].[IsDeleted] = CAST(0 AS bit)
2025-08-11 07:57:16.052 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.Notification, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 07:57:16.052 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType69`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 07:57:16.052 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet) in 142.9632ms
2025-08-11 07:57:16.052 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 07:57:16.052 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet) in 155.3448ms
2025-08-11 07:57:16.053 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 07:57:16.053 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 498.1352ms
2025-08-11 07:57:16.053 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 497.6576ms
2025-08-11 07:57:16.053 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.UserActivity, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 07:57:16.093 +00:00 [INF] Executed DbCommand (39ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Department], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsActive], [a].[LastActivityDate], [a].[LastLoginDate], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[MustChangePassword], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-08-11 07:57:16.093 +00:00 [INF] Executed action PersonaXFleet.Controllers.UserActivityController.GetRecentActivities (PersonaXFleet) in 183.7156ms
2025-08-11 07:57:16.093 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.UserActivityController.GetRecentActivities (PersonaXFleet)'
2025-08-11 07:57:16.094 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/UserActivity/recent?limit=4 - 200 null application/json; charset=utf-8 496.122ms
2025-08-11 07:57:16.096 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 07:57:16.097 +00:00 [INF] CORS policy execution successful.
2025-08-11 07:57:16.097 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 07:57:16.097 +00:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 07:57:16.098 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 07:57:16.098 +00:00 [INF] CORS policy execution successful.
2025-08-11 07:57:16.098 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 07:57:16.098 +00:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 07:57:16.113 +00:00 [INF] Executed DbCommand (17ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Department], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsActive], [a].[LastActivityDate], [a].[LastLoginDate], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[MustChangePassword], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-08-11 07:57:16.113 +00:00 [INF] Executed DbCommand (14ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsRead] = CAST(0 AS bit) AND [n].[IsDeleted] = CAST(0 AS bit)
2025-08-11 07:57:16.113 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType69`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 07:57:16.113 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet) in 15.2476ms
2025-08-11 07:57:16.113 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 07:57:16.113 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 15.8102ms
2025-08-11 07:57:16.115 +00:00 [INF] Executed DbCommand (16ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[ActionLink], [n].[CreatedAt], [n].[IsDeleted], [n].[IsRead], [n].[Message], [n].[RelatedEntityId], [n].[Title], [n].[Type], [n].[UserId], [n].[Username]
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsDeleted] = CAST(0 AS bit)
ORDER BY [n].[CreatedAt] DESC
2025-08-11 07:57:16.116 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.Notification, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 07:57:16.116 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet) in 18.2595ms
2025-08-11 07:57:16.116 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 07:57:16.116 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 20.4357ms
2025-08-11 07:57:16.164 +00:00 [INF] Executed DbCommand (50ms) [Parameters=[@p21='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p22='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime2), @p8='?' (DbType = DateTime2), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (DbType = Boolean), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Department] = @p2, [Email] = @p3, [EmailConfirmed] = @p4, [FullName] = @p5, [IsActive] = @p6, [LastActivityDate] = @p7, [LastLoginDate] = @p8, [LockoutEnabled] = @p9, [LockoutEnd] = @p10, [MustChangePassword] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [ProfilePicture] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UserName] = @p20
OUTPUT 1
WHERE [Id] = @p21 AND [ConcurrencyStamp] = @p22;
2025-08-11 07:57:16.165 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType15`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 07:57:16.165 +00:00 [INF] Executed action FleetIdentityServer.Controllers.Auth.PingActivity (PersonaXFleet) in 119.8802ms
2025-08-11 07:57:16.165 +00:00 [INF] Executed endpoint 'FleetIdentityServer.Controllers.Auth.PingActivity (PersonaXFleet)'
2025-08-11 07:57:16.165 +00:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/activity/ping - 200 null application/json; charset=utf-8 135.1731ms
2025-08-11 07:57:16.174 +00:00 [INF] Executed DbCommand (181ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MaintenanceId], [m].[VehicleId], [v].[Make], [v].[Model], [v].[LicensePlate], [m].[RequestType], [m].[Description], [m].[RequestDate], [m].[Status], [m].[Priority], [m].[EstimatedCost], [m].[AdminComments], [m].[RequestedByUserId], [a].[UserName], [m].[Department], [m].[CurrentStage], [r].[Name]
FROM [UserRouteRoles] AS [u]
INNER JOIN [MaintenanceRequests] AS [m] ON [u].[RouteId] = [m].[CurrentRouteId]
INNER JOIN [Vehicles] AS [v] ON [m].[VehicleId] = [v].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RequestedByUserId] = [a].[Id]
LEFT JOIN [Routes] AS [r] ON [m].[CurrentRouteId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0 AND [u].[Role] = [m].[CurrentStage] AND NOT EXISTS (
    SELECT 1
    FROM [MaintenanceTransactions] AS [m0]
    WHERE [m0].[MaintenanceRequestId] = [m].[MaintenanceId] AND [m0].[Action] = [m].[CurrentStage] AND [m0].[UserId] = [u].[UserId] AND [m0].[IsCompleted] = CAST(1 AS bit))
2025-08-11 07:57:16.175 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.MaintenanceRequestDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 07:57:16.175 +00:00 [INF] Executed action PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet) in 276.1941ms
2025-08-11 07:57:16.175 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 07:57:16.175 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 599.0159ms
2025-08-11 07:57:16.188 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 07:57:16.189 +00:00 [INF] CORS policy execution successful.
2025-08-11 07:57:16.189 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 07:57:16.189 +00:00 [INF] Route matched with {action = "GetMyPendingActions", controller = "MaintenanceRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPendingActions(System.String) on controller PersonaXFleet.Controllers.MaintenanceRequestController (PersonaXFleet).
2025-08-11 07:57:16.221 +00:00 [INF] Executed DbCommand (28ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MaintenanceId], [m].[VehicleId], [v].[Make], [v].[Model], [v].[LicensePlate], [m].[RequestType], [m].[Description], [m].[RequestDate], [m].[Status], [m].[Priority], [m].[EstimatedCost], [m].[AdminComments], [m].[RequestedByUserId], [a].[UserName], [m].[Department], [m].[CurrentStage], [r].[Name]
FROM [UserRouteRoles] AS [u]
INNER JOIN [MaintenanceRequests] AS [m] ON [u].[RouteId] = [m].[CurrentRouteId]
INNER JOIN [Vehicles] AS [v] ON [m].[VehicleId] = [v].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RequestedByUserId] = [a].[Id]
LEFT JOIN [Routes] AS [r] ON [m].[CurrentRouteId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0 AND [u].[Role] = [m].[CurrentStage] AND NOT EXISTS (
    SELECT 1
    FROM [MaintenanceTransactions] AS [m0]
    WHERE [m0].[MaintenanceRequestId] = [m].[MaintenanceId] AND [m0].[Action] = [m].[CurrentStage] AND [m0].[UserId] = [u].[UserId] AND [m0].[IsCompleted] = CAST(1 AS bit))
2025-08-11 07:57:16.304 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.MaintenanceRequestDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 07:57:16.304 +00:00 [INF] Executed action PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet) in 114.9291ms
2025-08-11 07:57:16.304 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 07:57:16.304 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 116.5299ms
2025-08-11 07:57:45.454 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 07:57:45.454 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 07:57:45.455 +00:00 [INF] CORS policy execution successful.
2025-08-11 07:57:45.455 +00:00 [INF] CORS policy execution successful.
2025-08-11 07:57:45.455 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 07:57:45.455 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 07:57:45.455 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 07:57:45.455 +00:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 07:57:45.456 +00:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 07:57:45.456 +00:00 [INF] CORS policy execution successful.
2025-08-11 07:57:45.456 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 07:57:45.456 +00:00 [INF] Route matched with {action = "GetMyPendingActions", controller = "MaintenanceRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPendingActions(System.String) on controller PersonaXFleet.Controllers.MaintenanceRequestController (PersonaXFleet).
2025-08-11 07:57:45.481 +00:00 [INF] Executed DbCommand (14ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsRead] = CAST(0 AS bit) AND [n].[IsDeleted] = CAST(0 AS bit)
2025-08-11 07:57:45.481 +00:00 [INF] Executed DbCommand (13ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[ActionLink], [n].[CreatedAt], [n].[IsDeleted], [n].[IsRead], [n].[Message], [n].[RelatedEntityId], [n].[Title], [n].[Type], [n].[UserId], [n].[Username]
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsDeleted] = CAST(0 AS bit)
ORDER BY [n].[CreatedAt] DESC
2025-08-11 07:57:45.482 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType69`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 07:57:45.482 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.Notification, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 07:57:45.482 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet) in 26.2758ms
2025-08-11 07:57:45.482 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 07:57:45.482 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet) in 26.4659ms
2025-08-11 07:57:45.482 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 07:57:45.483 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 28.5693ms
2025-08-11 07:57:45.483 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 28.9685ms
2025-08-11 07:57:45.486 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 07:57:45.487 +00:00 [INF] CORS policy execution successful.
2025-08-11 07:57:45.487 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 07:57:45.487 +00:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 07:57:45.488 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 07:57:45.488 +00:00 [INF] CORS policy execution successful.
2025-08-11 07:57:45.488 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 07:57:45.488 +00:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 07:57:45.490 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsRead] = CAST(0 AS bit) AND [n].[IsDeleted] = CAST(0 AS bit)
2025-08-11 07:57:45.493 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType69`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 07:57:45.506 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[ActionLink], [n].[CreatedAt], [n].[IsDeleted], [n].[IsRead], [n].[Message], [n].[RelatedEntityId], [n].[Title], [n].[Type], [n].[UserId], [n].[Username]
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsDeleted] = CAST(0 AS bit)
ORDER BY [n].[CreatedAt] DESC
2025-08-11 07:57:45.506 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet) in 19.0793ms
2025-08-11 07:57:45.506 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 07:57:45.507 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 20.5451ms
2025-08-11 07:57:45.508 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.Notification, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 07:57:45.508 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet) in 19.9328ms
2025-08-11 07:57:45.508 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 07:57:45.508 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 21.6874ms
2025-08-11 07:57:45.558 +00:00 [INF] Executed DbCommand (77ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MaintenanceId], [m].[VehicleId], [v].[Make], [v].[Model], [v].[LicensePlate], [m].[RequestType], [m].[Description], [m].[RequestDate], [m].[Status], [m].[Priority], [m].[EstimatedCost], [m].[AdminComments], [m].[RequestedByUserId], [a].[UserName], [m].[Department], [m].[CurrentStage], [r].[Name]
FROM [UserRouteRoles] AS [u]
INNER JOIN [MaintenanceRequests] AS [m] ON [u].[RouteId] = [m].[CurrentRouteId]
INNER JOIN [Vehicles] AS [v] ON [m].[VehicleId] = [v].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RequestedByUserId] = [a].[Id]
LEFT JOIN [Routes] AS [r] ON [m].[CurrentRouteId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0 AND [u].[Role] = [m].[CurrentStage] AND NOT EXISTS (
    SELECT 1
    FROM [MaintenanceTransactions] AS [m0]
    WHERE [m0].[MaintenanceRequestId] = [m].[MaintenanceId] AND [m0].[Action] = [m].[CurrentStage] AND [m0].[UserId] = [u].[UserId] AND [m0].[IsCompleted] = CAST(1 AS bit))
2025-08-11 07:57:45.559 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.MaintenanceRequestDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 07:57:45.559 +00:00 [INF] Executed action PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet) in 102.6338ms
2025-08-11 07:57:45.559 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 07:57:45.559 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 103.7135ms
2025-08-11 07:57:45.562 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 07:57:45.562 +00:00 [INF] CORS policy execution successful.
2025-08-11 07:57:45.562 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 07:57:45.562 +00:00 [INF] Route matched with {action = "GetMyPendingActions", controller = "MaintenanceRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPendingActions(System.String) on controller PersonaXFleet.Controllers.MaintenanceRequestController (PersonaXFleet).
2025-08-11 07:57:45.566 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MaintenanceId], [m].[VehicleId], [v].[Make], [v].[Model], [v].[LicensePlate], [m].[RequestType], [m].[Description], [m].[RequestDate], [m].[Status], [m].[Priority], [m].[EstimatedCost], [m].[AdminComments], [m].[RequestedByUserId], [a].[UserName], [m].[Department], [m].[CurrentStage], [r].[Name]
FROM [UserRouteRoles] AS [u]
INNER JOIN [MaintenanceRequests] AS [m] ON [u].[RouteId] = [m].[CurrentRouteId]
INNER JOIN [Vehicles] AS [v] ON [m].[VehicleId] = [v].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RequestedByUserId] = [a].[Id]
LEFT JOIN [Routes] AS [r] ON [m].[CurrentRouteId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0 AND [u].[Role] = [m].[CurrentStage] AND NOT EXISTS (
    SELECT 1
    FROM [MaintenanceTransactions] AS [m0]
    WHERE [m0].[MaintenanceRequestId] = [m].[MaintenanceId] AND [m0].[Action] = [m].[CurrentStage] AND [m0].[UserId] = [u].[UserId] AND [m0].[IsCompleted] = CAST(1 AS bit))
2025-08-11 07:57:45.569 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.MaintenanceRequestDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 07:57:45.569 +00:00 [INF] Executed action PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet) in 6.9957ms
2025-08-11 07:57:45.570 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 07:57:45.570 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 8.6353ms
2025-08-11 07:58:45.440 +00:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7092/api/Auth/activity/ping - null null
2025-08-11 07:58:45.441 +00:00 [INF] CORS policy execution successful.
2025-08-11 07:58:45.441 +00:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7092/api/Auth/activity/ping - 204 null null 0.9785ms
2025-08-11 07:58:45.443 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/UserActivity/recent?limit=4 - null null
2025-08-11 07:58:45.445 +00:00 [INF] CORS policy execution successful.
2025-08-11 07:58:45.445 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.UserActivityController.GetRecentActivities (PersonaXFleet)'
2025-08-11 07:58:45.445 +00:00 [INF] Route matched with {action = "GetRecentActivities", controller = "UserActivity"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentActivities(Int32) on controller PersonaXFleet.Controllers.UserActivityController (PersonaXFleet).
2025-08-11 07:58:45.445 +00:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/activity/ping - application/json 49
2025-08-11 07:58:45.445 +00:00 [INF] CORS policy execution successful.
2025-08-11 07:58:45.445 +00:00 [INF] Executing endpoint 'FleetIdentityServer.Controllers.Auth.PingActivity (PersonaXFleet)'
2025-08-11 07:58:45.445 +00:00 [INF] Route matched with {action = "PingActivity", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PingActivity(FleetIdentityServer.Controllers.PingActivityRequest) on controller FleetIdentityServer.Controllers.Auth (PersonaXFleet).
2025-08-11 07:58:45.466 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 07:58:45.467 +00:00 [INF] CORS policy execution successful.
2025-08-11 07:58:45.467 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 07:58:45.467 +00:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 07:58:45.470 +00:00 [INF] Executed DbCommand (15ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Department], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsActive], [a].[LastActivityDate], [a].[LastLoginDate], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[MustChangePassword], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-08-11 07:58:45.478 +00:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ActivityType], [t].[Description], [t].[Details], [t].[DurationMs], [t].[EntityId], [t].[EntityType], [t].[ErrorMessage], [t].[IpAddress], [t].[IsSuccessful], [t].[Module], [t].[NewValues], [t].[OldValues], [t].[PageUrl], [t].[SessionId], [t].[Timestamp], [t].[UserAgent], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Department], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsActive], [a].[LastActivityDate], [a].[LastLoginDate], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[MustChangePassword], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [u].[Id], [u].[ActivityType], [u].[Description], [u].[Details], [u].[DurationMs], [u].[EntityId], [u].[EntityType], [u].[ErrorMessage], [u].[IpAddress], [u].[IsSuccessful], [u].[Module], [u].[NewValues], [u].[OldValues], [u].[PageUrl], [u].[SessionId], [u].[Timestamp], [u].[UserAgent], [u].[UserId]
    FROM [UserActivities] AS [u]
    ORDER BY [u].[Timestamp] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
ORDER BY [t].[Timestamp] DESC
2025-08-11 07:58:45.478 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[ActionLink], [n].[CreatedAt], [n].[IsDeleted], [n].[IsRead], [n].[Message], [n].[RelatedEntityId], [n].[Title], [n].[Type], [n].[UserId], [n].[Username]
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsDeleted] = CAST(0 AS bit)
ORDER BY [n].[CreatedAt] DESC
2025-08-11 07:58:45.479 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.Notification, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 07:58:45.479 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet) in 11.137ms
2025-08-11 07:58:45.479 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 07:58:45.479 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 12.8257ms
2025-08-11 07:58:45.479 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.UserActivity, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 07:58:45.482 +00:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Department], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsActive], [a].[LastActivityDate], [a].[LastLoginDate], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[MustChangePassword], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-08-11 07:58:45.485 +00:00 [INF] Executed action PersonaXFleet.Controllers.UserActivityController.GetRecentActivities (PersonaXFleet) in 39.7396ms
2025-08-11 07:58:45.485 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.UserActivityController.GetRecentActivities (PersonaXFleet)'
2025-08-11 07:58:45.485 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/UserActivity/recent?limit=4 - 200 null application/json; charset=utf-8 42.5502ms
2025-08-11 07:58:45.494 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 07:58:45.494 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 07:58:45.494 +00:00 [INF] CORS policy execution successful.
2025-08-11 07:58:45.494 +00:00 [INF] CORS policy execution successful.
2025-08-11 07:58:45.494 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 07:58:45.494 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 07:58:45.494 +00:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 07:58:45.494 +00:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 07:58:45.501 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[ActionLink], [n].[CreatedAt], [n].[IsDeleted], [n].[IsRead], [n].[Message], [n].[RelatedEntityId], [n].[Title], [n].[Type], [n].[UserId], [n].[Username]
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsDeleted] = CAST(0 AS bit)
ORDER BY [n].[CreatedAt] DESC
2025-08-11 07:58:45.501 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsRead] = CAST(0 AS bit) AND [n].[IsDeleted] = CAST(0 AS bit)
2025-08-11 07:58:45.503 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType69`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 07:58:45.503 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet) in 8.8309ms
2025-08-11 07:58:45.503 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.Notification, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 07:58:45.503 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 07:58:45.504 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet) in 9.2866ms
2025-08-11 07:58:45.504 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 07:58:45.504 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 10.2854ms
2025-08-11 07:58:45.504 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 10.3608ms
2025-08-11 07:58:45.505 +00:00 [INF] Executed DbCommand (19ms) [Parameters=[@p21='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p22='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime2), @p8='?' (DbType = DateTime2), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (DbType = Boolean), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Department] = @p2, [Email] = @p3, [EmailConfirmed] = @p4, [FullName] = @p5, [IsActive] = @p6, [LastActivityDate] = @p7, [LastLoginDate] = @p8, [LockoutEnabled] = @p9, [LockoutEnd] = @p10, [MustChangePassword] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [ProfilePicture] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UserName] = @p20
OUTPUT 1
WHERE [Id] = @p21 AND [ConcurrencyStamp] = @p22;
2025-08-11 07:58:45.507 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 07:58:45.507 +00:00 [INF] CORS policy execution successful.
2025-08-11 07:58:45.507 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 07:58:45.507 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType15`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 07:58:45.507 +00:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 07:58:45.507 +00:00 [INF] Executed action FleetIdentityServer.Controllers.Auth.PingActivity (PersonaXFleet) in 61.9061ms
2025-08-11 07:58:45.507 +00:00 [INF] Executed endpoint 'FleetIdentityServer.Controllers.Auth.PingActivity (PersonaXFleet)'
2025-08-11 07:58:45.507 +00:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/activity/ping - 200 null application/json; charset=utf-8 62.4022ms
2025-08-11 07:58:45.522 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 07:58:45.524 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsRead] = CAST(0 AS bit) AND [n].[IsDeleted] = CAST(0 AS bit)
2025-08-11 07:58:45.524 +00:00 [INF] CORS policy execution successful.
2025-08-11 07:58:45.525 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 07:58:45.525 +00:00 [INF] Route matched with {action = "GetMyPendingActions", controller = "MaintenanceRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPendingActions(System.String) on controller PersonaXFleet.Controllers.MaintenanceRequestController (PersonaXFleet).
2025-08-11 07:58:45.541 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType69`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 07:58:45.542 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet) in 35.0307ms
2025-08-11 07:58:45.543 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 07:58:45.546 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 38.9273ms
2025-08-11 07:58:45.608 +00:00 [INF] Executed DbCommand (75ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MaintenanceId], [m].[VehicleId], [v].[Make], [v].[Model], [v].[LicensePlate], [m].[RequestType], [m].[Description], [m].[RequestDate], [m].[Status], [m].[Priority], [m].[EstimatedCost], [m].[AdminComments], [m].[RequestedByUserId], [a].[UserName], [m].[Department], [m].[CurrentStage], [r].[Name]
FROM [UserRouteRoles] AS [u]
INNER JOIN [MaintenanceRequests] AS [m] ON [u].[RouteId] = [m].[CurrentRouteId]
INNER JOIN [Vehicles] AS [v] ON [m].[VehicleId] = [v].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RequestedByUserId] = [a].[Id]
LEFT JOIN [Routes] AS [r] ON [m].[CurrentRouteId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0 AND [u].[Role] = [m].[CurrentStage] AND NOT EXISTS (
    SELECT 1
    FROM [MaintenanceTransactions] AS [m0]
    WHERE [m0].[MaintenanceRequestId] = [m].[MaintenanceId] AND [m0].[Action] = [m].[CurrentStage] AND [m0].[UserId] = [u].[UserId] AND [m0].[IsCompleted] = CAST(1 AS bit))
2025-08-11 07:58:45.608 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.MaintenanceRequestDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 07:58:45.608 +00:00 [INF] Executed action PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet) in 83.7422ms
2025-08-11 07:58:45.608 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 07:58:45.609 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 86.7599ms
2025-08-11 07:58:45.611 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 07:58:45.612 +00:00 [INF] CORS policy execution successful.
2025-08-11 07:58:45.612 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 07:58:45.612 +00:00 [INF] Route matched with {action = "GetMyPendingActions", controller = "MaintenanceRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPendingActions(System.String) on controller PersonaXFleet.Controllers.MaintenanceRequestController (PersonaXFleet).
2025-08-11 07:58:45.618 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MaintenanceId], [m].[VehicleId], [v].[Make], [v].[Model], [v].[LicensePlate], [m].[RequestType], [m].[Description], [m].[RequestDate], [m].[Status], [m].[Priority], [m].[EstimatedCost], [m].[AdminComments], [m].[RequestedByUserId], [a].[UserName], [m].[Department], [m].[CurrentStage], [r].[Name]
FROM [UserRouteRoles] AS [u]
INNER JOIN [MaintenanceRequests] AS [m] ON [u].[RouteId] = [m].[CurrentRouteId]
INNER JOIN [Vehicles] AS [v] ON [m].[VehicleId] = [v].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RequestedByUserId] = [a].[Id]
LEFT JOIN [Routes] AS [r] ON [m].[CurrentRouteId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0 AND [u].[Role] = [m].[CurrentStage] AND NOT EXISTS (
    SELECT 1
    FROM [MaintenanceTransactions] AS [m0]
    WHERE [m0].[MaintenanceRequestId] = [m].[MaintenanceId] AND [m0].[Action] = [m].[CurrentStage] AND [m0].[UserId] = [u].[UserId] AND [m0].[IsCompleted] = CAST(1 AS bit))
2025-08-11 07:58:45.620 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.MaintenanceRequestDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 07:58:45.621 +00:00 [INF] Executed action PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet) in 9.5361ms
2025-08-11 07:58:45.621 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 07:58:45.622 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 10.8301ms
2025-08-11 07:59:45.472 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 07:59:45.472 +00:00 [INF] CORS policy execution successful.
2025-08-11 07:59:45.484 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 07:59:45.484 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 07:59:45.484 +00:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 07:59:45.484 +00:00 [INF] CORS policy execution successful.
2025-08-11 07:59:45.484 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 07:59:45.484 +00:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 07:59:45.490 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 07:59:45.490 +00:00 [INF] CORS policy execution successful.
2025-08-11 07:59:45.490 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 07:59:45.490 +00:00 [INF] Route matched with {action = "GetMyPendingActions", controller = "MaintenanceRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPendingActions(System.String) on controller PersonaXFleet.Controllers.MaintenanceRequestController (PersonaXFleet).
2025-08-11 07:59:45.505 +00:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsRead] = CAST(0 AS bit) AND [n].[IsDeleted] = CAST(0 AS bit)
2025-08-11 07:59:45.507 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType69`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 07:59:45.508 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet) in 23.2221ms
2025-08-11 07:59:45.508 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 07:59:45.509 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 24.9174ms
2025-08-11 07:59:45.512 +00:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[ActionLink], [n].[CreatedAt], [n].[IsDeleted], [n].[IsRead], [n].[Message], [n].[RelatedEntityId], [n].[Title], [n].[Type], [n].[UserId], [n].[Username]
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsDeleted] = CAST(0 AS bit)
ORDER BY [n].[CreatedAt] DESC
2025-08-11 07:59:45.513 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.Notification, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 07:59:45.513 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet) in 28.7897ms
2025-08-11 07:59:45.513 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 07:59:45.513 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 41.2109ms
2025-08-11 07:59:45.513 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 07:59:45.514 +00:00 [INF] CORS policy execution successful.
2025-08-11 07:59:45.520 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 07:59:45.521 +00:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 07:59:45.532 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 07:59:45.532 +00:00 [INF] CORS policy execution successful.
2025-08-11 07:59:45.533 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 07:59:45.533 +00:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsRead] = CAST(0 AS bit) AND [n].[IsDeleted] = CAST(0 AS bit)
2025-08-11 07:59:45.533 +00:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 07:59:45.535 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType69`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 07:59:45.536 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet) in 12.3884ms
2025-08-11 07:59:45.536 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 07:59:45.536 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 22.2805ms
2025-08-11 07:59:45.539 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[ActionLink], [n].[CreatedAt], [n].[IsDeleted], [n].[IsRead], [n].[Message], [n].[RelatedEntityId], [n].[Title], [n].[Type], [n].[UserId], [n].[Username]
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsDeleted] = CAST(0 AS bit)
ORDER BY [n].[CreatedAt] DESC
2025-08-11 07:59:45.540 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.Notification, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 07:59:45.540 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet) in 7.4187ms
2025-08-11 07:59:45.540 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 07:59:45.540 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 9.1124ms
2025-08-11 07:59:45.586 +00:00 [INF] Executed DbCommand (74ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MaintenanceId], [m].[VehicleId], [v].[Make], [v].[Model], [v].[LicensePlate], [m].[RequestType], [m].[Description], [m].[RequestDate], [m].[Status], [m].[Priority], [m].[EstimatedCost], [m].[AdminComments], [m].[RequestedByUserId], [a].[UserName], [m].[Department], [m].[CurrentStage], [r].[Name]
FROM [UserRouteRoles] AS [u]
INNER JOIN [MaintenanceRequests] AS [m] ON [u].[RouteId] = [m].[CurrentRouteId]
INNER JOIN [Vehicles] AS [v] ON [m].[VehicleId] = [v].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RequestedByUserId] = [a].[Id]
LEFT JOIN [Routes] AS [r] ON [m].[CurrentRouteId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0 AND [u].[Role] = [m].[CurrentStage] AND NOT EXISTS (
    SELECT 1
    FROM [MaintenanceTransactions] AS [m0]
    WHERE [m0].[MaintenanceRequestId] = [m].[MaintenanceId] AND [m0].[Action] = [m].[CurrentStage] AND [m0].[UserId] = [u].[UserId] AND [m0].[IsCompleted] = CAST(1 AS bit))
2025-08-11 07:59:45.586 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.MaintenanceRequestDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 07:59:45.587 +00:00 [INF] Executed action PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet) in 96.4262ms
2025-08-11 07:59:45.587 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 07:59:45.587 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 97.0216ms
2025-08-11 07:59:45.589 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 07:59:45.589 +00:00 [INF] CORS policy execution successful.
2025-08-11 07:59:45.590 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 07:59:45.590 +00:00 [INF] Route matched with {action = "GetMyPendingActions", controller = "MaintenanceRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPendingActions(System.String) on controller PersonaXFleet.Controllers.MaintenanceRequestController (PersonaXFleet).
2025-08-11 07:59:45.593 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MaintenanceId], [m].[VehicleId], [v].[Make], [v].[Model], [v].[LicensePlate], [m].[RequestType], [m].[Description], [m].[RequestDate], [m].[Status], [m].[Priority], [m].[EstimatedCost], [m].[AdminComments], [m].[RequestedByUserId], [a].[UserName], [m].[Department], [m].[CurrentStage], [r].[Name]
FROM [UserRouteRoles] AS [u]
INNER JOIN [MaintenanceRequests] AS [m] ON [u].[RouteId] = [m].[CurrentRouteId]
INNER JOIN [Vehicles] AS [v] ON [m].[VehicleId] = [v].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RequestedByUserId] = [a].[Id]
LEFT JOIN [Routes] AS [r] ON [m].[CurrentRouteId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0 AND [u].[Role] = [m].[CurrentStage] AND NOT EXISTS (
    SELECT 1
    FROM [MaintenanceTransactions] AS [m0]
    WHERE [m0].[MaintenanceRequestId] = [m].[MaintenanceId] AND [m0].[Action] = [m].[CurrentStage] AND [m0].[UserId] = [u].[UserId] AND [m0].[IsCompleted] = CAST(1 AS bit))
2025-08-11 07:59:45.595 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.MaintenanceRequestDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 07:59:45.595 +00:00 [INF] Executed action PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet) in 5.2882ms
2025-08-11 07:59:45.595 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 07:59:45.595 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 6.9769ms
2025-08-11 08:00:45.437 +00:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7092/api/Auth/activity/ping - null null
2025-08-11 08:00:45.437 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:00:45.437 +00:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7092/api/Auth/activity/ping - 204 null null 0.8324ms
2025-08-11 08:00:45.442 +00:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/activity/ping - application/json 49
2025-08-11 08:00:45.442 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:00:45.448 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:00:45.448 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:00:45.453 +00:00 [INF] Executing endpoint 'FleetIdentityServer.Controllers.Auth.PingActivity (PersonaXFleet)'
2025-08-11 08:00:45.453 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:00:45.453 +00:00 [INF] Route matched with {action = "PingActivity", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PingActivity(FleetIdentityServer.Controllers.PingActivityRequest) on controller FleetIdentityServer.Controllers.Auth (PersonaXFleet).
2025-08-11 08:00:45.453 +00:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:00:45.468 +00:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[ActionLink], [n].[CreatedAt], [n].[IsDeleted], [n].[IsRead], [n].[Message], [n].[RelatedEntityId], [n].[Title], [n].[Type], [n].[UserId], [n].[Username]
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsDeleted] = CAST(0 AS bit)
ORDER BY [n].[CreatedAt] DESC
2025-08-11 08:00:45.468 +00:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Department], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsActive], [a].[LastActivityDate], [a].[LastLoginDate], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[MustChangePassword], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-08-11 08:00:45.468 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.Notification, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:00:45.468 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet) in 15.3225ms
2025-08-11 08:00:45.468 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:00:45.468 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 26.4873ms
2025-08-11 08:00:45.472 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:00:45.474 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Department], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsActive], [a].[LastActivityDate], [a].[LastLoginDate], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[MustChangePassword], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-08-11 08:00:45.474 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:00:45.474 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:00:45.474 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:00:45.474 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:00:45.474 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:00:45.474 +00:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:00:45.474 +00:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:00:45.483 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:00:45.484 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:00:45.484 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:00:45.484 +00:00 [INF] Route matched with {action = "GetMyPendingActions", controller = "MaintenanceRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPendingActions(System.String) on controller PersonaXFleet.Controllers.MaintenanceRequestController (PersonaXFleet).
2025-08-11 08:00:45.493 +00:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[ActionLink], [n].[CreatedAt], [n].[IsDeleted], [n].[IsRead], [n].[Message], [n].[RelatedEntityId], [n].[Title], [n].[Type], [n].[UserId], [n].[Username]
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsDeleted] = CAST(0 AS bit)
ORDER BY [n].[CreatedAt] DESC
2025-08-11 08:00:45.495 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.Notification, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:00:45.496 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet) in 14.8578ms
2025-08-11 08:00:45.497 +00:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsRead] = CAST(0 AS bit) AND [n].[IsDeleted] = CAST(0 AS bit)
2025-08-11 08:00:45.497 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:00:45.497 +00:00 [INF] Executed DbCommand (13ms) [Parameters=[@p21='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p22='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime2), @p8='?' (DbType = DateTime2), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (DbType = Boolean), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Department] = @p2, [Email] = @p3, [EmailConfirmed] = @p4, [FullName] = @p5, [IsActive] = @p6, [LastActivityDate] = @p7, [LastLoginDate] = @p8, [LockoutEnabled] = @p9, [LockoutEnd] = @p10, [MustChangePassword] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [ProfilePicture] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UserName] = @p20
OUTPUT 1
WHERE [Id] = @p21 AND [ConcurrencyStamp] = @p22;
2025-08-11 08:00:45.497 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType69`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:00:45.497 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 25.1264ms
2025-08-11 08:00:45.497 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet) in 16.1523ms
2025-08-11 08:00:45.497 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:00:45.497 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 22.9132ms
2025-08-11 08:00:45.498 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType15`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:00:45.498 +00:00 [INF] Executed action FleetIdentityServer.Controllers.Auth.PingActivity (PersonaXFleet) in 45.3971ms
2025-08-11 08:00:45.499 +00:00 [INF] Executed endpoint 'FleetIdentityServer.Controllers.Auth.PingActivity (PersonaXFleet)'
2025-08-11 08:00:45.500 +00:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/activity/ping - 200 null application/json; charset=utf-8 57.5649ms
2025-08-11 08:00:45.501 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/UserActivity/recent?limit=4 - null null
2025-08-11 08:00:45.501 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:00:45.502 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:00:45.502 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:00:45.502 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.UserActivityController.GetRecentActivities (PersonaXFleet)'
2025-08-11 08:00:45.502 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:00:45.502 +00:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:00:45.502 +00:00 [INF] Route matched with {action = "GetRecentActivities", controller = "UserActivity"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentActivities(Int32) on controller PersonaXFleet.Controllers.UserActivityController (PersonaXFleet).
2025-08-11 08:00:45.519 +00:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsRead] = CAST(0 AS bit) AND [n].[IsDeleted] = CAST(0 AS bit)
2025-08-11 08:00:45.520 +00:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ActivityType], [t].[Description], [t].[Details], [t].[DurationMs], [t].[EntityId], [t].[EntityType], [t].[ErrorMessage], [t].[IpAddress], [t].[IsSuccessful], [t].[Module], [t].[NewValues], [t].[OldValues], [t].[PageUrl], [t].[SessionId], [t].[Timestamp], [t].[UserAgent], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Department], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsActive], [a].[LastActivityDate], [a].[LastLoginDate], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[MustChangePassword], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [u].[Id], [u].[ActivityType], [u].[Description], [u].[Details], [u].[DurationMs], [u].[EntityId], [u].[EntityType], [u].[ErrorMessage], [u].[IpAddress], [u].[IsSuccessful], [u].[Module], [u].[NewValues], [u].[OldValues], [u].[PageUrl], [u].[SessionId], [u].[Timestamp], [u].[UserAgent], [u].[UserId]
    FROM [UserActivities] AS [u]
    ORDER BY [u].[Timestamp] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
ORDER BY [t].[Timestamp] DESC
2025-08-11 08:00:45.523 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType69`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:00:45.524 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.UserActivity, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:00:45.524 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet) in 21.7977ms
2025-08-11 08:00:45.526 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:00:45.526 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 24.8974ms
2025-08-11 08:00:45.539 +00:00 [INF] Executed action PersonaXFleet.Controllers.UserActivityController.GetRecentActivities (PersonaXFleet) in 36.9536ms
2025-08-11 08:00:45.539 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.UserActivityController.GetRecentActivities (PersonaXFleet)'
2025-08-11 08:00:45.539 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/UserActivity/recent?limit=4 - 200 null application/json; charset=utf-8 38.143ms
2025-08-11 08:00:45.554 +00:00 [INF] Executed DbCommand (57ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MaintenanceId], [m].[VehicleId], [v].[Make], [v].[Model], [v].[LicensePlate], [m].[RequestType], [m].[Description], [m].[RequestDate], [m].[Status], [m].[Priority], [m].[EstimatedCost], [m].[AdminComments], [m].[RequestedByUserId], [a].[UserName], [m].[Department], [m].[CurrentStage], [r].[Name]
FROM [UserRouteRoles] AS [u]
INNER JOIN [MaintenanceRequests] AS [m] ON [u].[RouteId] = [m].[CurrentRouteId]
INNER JOIN [Vehicles] AS [v] ON [m].[VehicleId] = [v].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RequestedByUserId] = [a].[Id]
LEFT JOIN [Routes] AS [r] ON [m].[CurrentRouteId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0 AND [u].[Role] = [m].[CurrentStage] AND NOT EXISTS (
    SELECT 1
    FROM [MaintenanceTransactions] AS [m0]
    WHERE [m0].[MaintenanceRequestId] = [m].[MaintenanceId] AND [m0].[Action] = [m].[CurrentStage] AND [m0].[UserId] = [u].[UserId] AND [m0].[IsCompleted] = CAST(1 AS bit))
2025-08-11 08:00:45.555 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.MaintenanceRequestDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:00:45.555 +00:00 [INF] Executed action PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet) in 71.0153ms
2025-08-11 08:00:45.555 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:00:45.555 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 71.5795ms
2025-08-11 08:00:45.557 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:00:45.557 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:00:45.557 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:00:45.557 +00:00 [INF] Route matched with {action = "GetMyPendingActions", controller = "MaintenanceRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPendingActions(System.String) on controller PersonaXFleet.Controllers.MaintenanceRequestController (PersonaXFleet).
2025-08-11 08:00:45.560 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MaintenanceId], [m].[VehicleId], [v].[Make], [v].[Model], [v].[LicensePlate], [m].[RequestType], [m].[Description], [m].[RequestDate], [m].[Status], [m].[Priority], [m].[EstimatedCost], [m].[AdminComments], [m].[RequestedByUserId], [a].[UserName], [m].[Department], [m].[CurrentStage], [r].[Name]
FROM [UserRouteRoles] AS [u]
INNER JOIN [MaintenanceRequests] AS [m] ON [u].[RouteId] = [m].[CurrentRouteId]
INNER JOIN [Vehicles] AS [v] ON [m].[VehicleId] = [v].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RequestedByUserId] = [a].[Id]
LEFT JOIN [Routes] AS [r] ON [m].[CurrentRouteId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0 AND [u].[Role] = [m].[CurrentStage] AND NOT EXISTS (
    SELECT 1
    FROM [MaintenanceTransactions] AS [m0]
    WHERE [m0].[MaintenanceRequestId] = [m].[MaintenanceId] AND [m0].[Action] = [m].[CurrentStage] AND [m0].[UserId] = [u].[UserId] AND [m0].[IsCompleted] = CAST(1 AS bit))
2025-08-11 08:00:45.562 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.MaintenanceRequestDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:00:45.562 +00:00 [INF] Executed action PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet) in 4.9925ms
2025-08-11 08:00:45.563 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:00:45.563 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 6.5784ms
2025-08-11 08:01:04.703 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@__cutoffDate_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Department], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsActive], [a].[LastActivityDate], [a].[LastLoginDate], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[MustChangePassword], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit) AND [a].[LastActivityDate] < @__cutoffDate_0
2025-08-11 08:01:45.524 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:01:45.524 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:01:45.528 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:01:45.528 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:01:45.529 +00:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:01:45.529 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:01:45.530 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:01:45.541 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:01:45.541 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:01:45.541 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:01:45.541 +00:00 [INF] Route matched with {action = "GetMyPendingActions", controller = "MaintenanceRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPendingActions(System.String) on controller PersonaXFleet.Controllers.MaintenanceRequestController (PersonaXFleet).
2025-08-11 08:01:45.541 +00:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:01:45.597 +00:00 [INF] Executed DbCommand (39ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[ActionLink], [n].[CreatedAt], [n].[IsDeleted], [n].[IsRead], [n].[Message], [n].[RelatedEntityId], [n].[Title], [n].[Type], [n].[UserId], [n].[Username]
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsDeleted] = CAST(0 AS bit)
ORDER BY [n].[CreatedAt] DESC
2025-08-11 08:01:45.597 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.Notification, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:01:45.597 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet) in 56.0321ms
2025-08-11 08:01:45.597 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:01:45.598 +00:00 [INF] Executed DbCommand (41ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsRead] = CAST(0 AS bit) AND [n].[IsDeleted] = CAST(0 AS bit)
2025-08-11 08:01:45.608 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType69`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:01:45.608 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet) in 79.3768ms
2025-08-11 08:01:45.608 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:01:45.792 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 267.8402ms
2025-08-11 08:01:45.794 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:01:45.794 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:01:45.795 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:01:45.795 +00:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:01:45.805 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:01:45.805 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:01:45.805 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:01:45.805 +00:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:01:45.857 +00:00 [INF] Executed DbCommand (297ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MaintenanceId], [m].[VehicleId], [v].[Make], [v].[Model], [v].[LicensePlate], [m].[RequestType], [m].[Description], [m].[RequestDate], [m].[Status], [m].[Priority], [m].[EstimatedCost], [m].[AdminComments], [m].[RequestedByUserId], [a].[UserName], [m].[Department], [m].[CurrentStage], [r].[Name]
FROM [UserRouteRoles] AS [u]
INNER JOIN [MaintenanceRequests] AS [m] ON [u].[RouteId] = [m].[CurrentRouteId]
INNER JOIN [Vehicles] AS [v] ON [m].[VehicleId] = [v].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RequestedByUserId] = [a].[Id]
LEFT JOIN [Routes] AS [r] ON [m].[CurrentRouteId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0 AND [u].[Role] = [m].[CurrentStage] AND NOT EXISTS (
    SELECT 1
    FROM [MaintenanceTransactions] AS [m0]
    WHERE [m0].[MaintenanceRequestId] = [m].[MaintenanceId] AND [m0].[Action] = [m].[CurrentStage] AND [m0].[UserId] = [u].[UserId] AND [m0].[IsCompleted] = CAST(1 AS bit))
2025-08-11 08:01:45.859 +00:00 [INF] Executed DbCommand (61ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[ActionLink], [n].[CreatedAt], [n].[IsDeleted], [n].[IsRead], [n].[Message], [n].[RelatedEntityId], [n].[Title], [n].[Type], [n].[UserId], [n].[Username]
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsDeleted] = CAST(0 AS bit)
ORDER BY [n].[CreatedAt] DESC
2025-08-11 08:01:45.861 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.MaintenanceRequestDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:01:45.874 +00:00 [INF] Executed action PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet) in 332.595ms
2025-08-11 08:01:45.874 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:01:45.874 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.Notification, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:01:45.874 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 344.643ms
2025-08-11 08:01:45.874 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet) in 79.7611ms
2025-08-11 08:01:45.874 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:01:45.885 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 90.4314ms
2025-08-11 08:01:45.885 +00:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsRead] = CAST(0 AS bit) AND [n].[IsDeleted] = CAST(0 AS bit)
2025-08-11 08:01:45.889 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:01:45.890 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:01:45.890 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType69`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:01:45.892 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:01:45.892 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet) in 46.8607ms
2025-08-11 08:01:45.892 +00:00 [INF] Route matched with {action = "GetMyPendingActions", controller = "MaintenanceRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPendingActions(System.String) on controller PersonaXFleet.Controllers.MaintenanceRequestController (PersonaXFleet).
2025-08-11 08:01:45.892 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:01:45.892 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 87.5632ms
2025-08-11 08:01:45.897 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 372.6386ms
2025-08-11 08:01:45.917 +00:00 [INF] Executed DbCommand (18ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MaintenanceId], [m].[VehicleId], [v].[Make], [v].[Model], [v].[LicensePlate], [m].[RequestType], [m].[Description], [m].[RequestDate], [m].[Status], [m].[Priority], [m].[EstimatedCost], [m].[AdminComments], [m].[RequestedByUserId], [a].[UserName], [m].[Department], [m].[CurrentStage], [r].[Name]
FROM [UserRouteRoles] AS [u]
INNER JOIN [MaintenanceRequests] AS [m] ON [u].[RouteId] = [m].[CurrentRouteId]
INNER JOIN [Vehicles] AS [v] ON [m].[VehicleId] = [v].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RequestedByUserId] = [a].[Id]
LEFT JOIN [Routes] AS [r] ON [m].[CurrentRouteId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0 AND [u].[Role] = [m].[CurrentStage] AND NOT EXISTS (
    SELECT 1
    FROM [MaintenanceTransactions] AS [m0]
    WHERE [m0].[MaintenanceRequestId] = [m].[MaintenanceId] AND [m0].[Action] = [m].[CurrentStage] AND [m0].[UserId] = [u].[UserId] AND [m0].[IsCompleted] = CAST(1 AS bit))
2025-08-11 08:01:45.930 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.MaintenanceRequestDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:01:45.930 +00:00 [INF] Executed action PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet) in 37.9982ms
2025-08-11 08:01:45.930 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:01:45.931 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 42.1314ms
2025-08-11 08:02:45.452 +00:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7092/api/Auth/activity/ping - null null
2025-08-11 08:02:45.453 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:02:45.453 +00:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7092/api/Auth/activity/ping - 204 null null 1.4051ms
2025-08-11 08:02:45.463 +00:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/activity/ping - application/json 49
2025-08-11 08:02:45.463 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:02:45.463 +00:00 [INF] Executing endpoint 'FleetIdentityServer.Controllers.Auth.PingActivity (PersonaXFleet)'
2025-08-11 08:02:45.468 +00:00 [INF] Route matched with {action = "PingActivity", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PingActivity(FleetIdentityServer.Controllers.PingActivityRequest) on controller FleetIdentityServer.Controllers.Auth (PersonaXFleet).
2025-08-11 08:02:45.471 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:02:45.471 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:02:45.475 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:02:45.476 +00:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:02:45.477 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:02:45.478 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:02:45.478 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:02:45.478 +00:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:02:45.498 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:02:45.499 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:02:45.499 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:02:45.499 +00:00 [INF] Route matched with {action = "GetMyPendingActions", controller = "MaintenanceRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPendingActions(System.String) on controller PersonaXFleet.Controllers.MaintenanceRequestController (PersonaXFleet).
2025-08-11 08:02:45.506 +00:00 [INF] Executed DbCommand (27ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsRead] = CAST(0 AS bit) AND [n].[IsDeleted] = CAST(0 AS bit)
2025-08-11 08:02:45.506 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType69`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:02:45.510 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet) in 32.4068ms
2025-08-11 08:02:45.511 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:02:45.511 +00:00 [INF] Executed DbCommand (32ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[ActionLink], [n].[CreatedAt], [n].[IsDeleted], [n].[IsRead], [n].[Message], [n].[RelatedEntityId], [n].[Title], [n].[Type], [n].[UserId], [n].[Username]
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsDeleted] = CAST(0 AS bit)
ORDER BY [n].[CreatedAt] DESC
2025-08-11 08:02:45.511 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 35.41ms
2025-08-11 08:02:45.511 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.Notification, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:02:45.511 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet) in 35.8152ms
2025-08-11 08:02:45.511 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:02:45.512 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 40.9253ms
2025-08-11 08:02:45.512 +00:00 [INF] Executed DbCommand (34ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Department], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsActive], [a].[LastActivityDate], [a].[LastLoginDate], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[MustChangePassword], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-08-11 08:02:45.514 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:02:45.515 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:02:45.515 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:02:45.515 +00:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:02:45.525 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:02:45.525 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:02:45.525 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:02:45.525 +00:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:02:45.545 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Department], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsActive], [a].[LastActivityDate], [a].[LastLoginDate], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[MustChangePassword], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-08-11 08:02:45.550 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsRead] = CAST(0 AS bit) AND [n].[IsDeleted] = CAST(0 AS bit)
2025-08-11 08:02:45.552 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType69`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:02:45.557 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet) in 42.3916ms
2025-08-11 08:02:45.559 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:02:45.572 +00:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[ActionLink], [n].[CreatedAt], [n].[IsDeleted], [n].[IsRead], [n].[Message], [n].[RelatedEntityId], [n].[Title], [n].[Type], [n].[UserId], [n].[Username]
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsDeleted] = CAST(0 AS bit)
ORDER BY [n].[CreatedAt] DESC
2025-08-11 08:02:45.587 +00:00 [INF] Executed DbCommand (21ms) [Parameters=[@p21='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p22='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime2), @p8='?' (DbType = DateTime2), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (DbType = Boolean), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Department] = @p2, [Email] = @p3, [EmailConfirmed] = @p4, [FullName] = @p5, [IsActive] = @p6, [LastActivityDate] = @p7, [LastLoginDate] = @p8, [LockoutEnabled] = @p9, [LockoutEnd] = @p10, [MustChangePassword] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [ProfilePicture] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UserName] = @p20
OUTPUT 1
WHERE [Id] = @p21 AND [ConcurrencyStamp] = @p22;
2025-08-11 08:02:45.592 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.Notification, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:02:45.593 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet) in 67.636ms
2025-08-11 08:02:45.593 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:02:45.595 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 79.9107ms
2025-08-11 08:02:45.596 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 73.3571ms
2025-08-11 08:02:45.596 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType15`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:02:45.597 +00:00 [INF] Executed action FleetIdentityServer.Controllers.Auth.PingActivity (PersonaXFleet) in 128.474ms
2025-08-11 08:02:45.597 +00:00 [INF] Executed endpoint 'FleetIdentityServer.Controllers.Auth.PingActivity (PersonaXFleet)'
2025-08-11 08:02:45.597 +00:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/activity/ping - 200 null application/json; charset=utf-8 134.305ms
2025-08-11 08:02:45.611 +00:00 [INF] Executed DbCommand (96ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MaintenanceId], [m].[VehicleId], [v].[Make], [v].[Model], [v].[LicensePlate], [m].[RequestType], [m].[Description], [m].[RequestDate], [m].[Status], [m].[Priority], [m].[EstimatedCost], [m].[AdminComments], [m].[RequestedByUserId], [a].[UserName], [m].[Department], [m].[CurrentStage], [r].[Name]
FROM [UserRouteRoles] AS [u]
INNER JOIN [MaintenanceRequests] AS [m] ON [u].[RouteId] = [m].[CurrentRouteId]
INNER JOIN [Vehicles] AS [v] ON [m].[VehicleId] = [v].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RequestedByUserId] = [a].[Id]
LEFT JOIN [Routes] AS [r] ON [m].[CurrentRouteId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0 AND [u].[Role] = [m].[CurrentStage] AND NOT EXISTS (
    SELECT 1
    FROM [MaintenanceTransactions] AS [m0]
    WHERE [m0].[MaintenanceRequestId] = [m].[MaintenanceId] AND [m0].[Action] = [m].[CurrentStage] AND [m0].[UserId] = [u].[UserId] AND [m0].[IsCompleted] = CAST(1 AS bit))
2025-08-11 08:02:45.611 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.MaintenanceRequestDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:02:45.612 +00:00 [INF] Executed action PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet) in 108.1162ms
2025-08-11 08:02:45.612 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:02:45.612 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 117.5251ms
2025-08-11 08:02:45.614 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:02:45.615 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:02:45.615 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:02:45.615 +00:00 [INF] Route matched with {action = "GetMyPendingActions", controller = "MaintenanceRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPendingActions(System.String) on controller PersonaXFleet.Controllers.MaintenanceRequestController (PersonaXFleet).
2025-08-11 08:02:45.619 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MaintenanceId], [m].[VehicleId], [v].[Make], [v].[Model], [v].[LicensePlate], [m].[RequestType], [m].[Description], [m].[RequestDate], [m].[Status], [m].[Priority], [m].[EstimatedCost], [m].[AdminComments], [m].[RequestedByUserId], [a].[UserName], [m].[Department], [m].[CurrentStage], [r].[Name]
FROM [UserRouteRoles] AS [u]
INNER JOIN [MaintenanceRequests] AS [m] ON [u].[RouteId] = [m].[CurrentRouteId]
INNER JOIN [Vehicles] AS [v] ON [m].[VehicleId] = [v].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RequestedByUserId] = [a].[Id]
LEFT JOIN [Routes] AS [r] ON [m].[CurrentRouteId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0 AND [u].[Role] = [m].[CurrentStage] AND NOT EXISTS (
    SELECT 1
    FROM [MaintenanceTransactions] AS [m0]
    WHERE [m0].[MaintenanceRequestId] = [m].[MaintenanceId] AND [m0].[Action] = [m].[CurrentStage] AND [m0].[UserId] = [u].[UserId] AND [m0].[IsCompleted] = CAST(1 AS bit))
2025-08-11 08:02:45.620 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.MaintenanceRequestDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:02:45.621 +00:00 [INF] Executed action PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet) in 5.4176ms
2025-08-11 08:02:45.621 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:02:45.622 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 8.0655ms
2025-08-11 08:03:45.442 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/UserActivity/recent?limit=4 - null null
2025-08-11 08:03:45.445 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:03:45.445 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:03:45.446 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:03:45.446 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:03:45.446 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.UserActivityController.GetRecentActivities (PersonaXFleet)'
2025-08-11 08:03:45.446 +00:00 [INF] Route matched with {action = "GetRecentActivities", controller = "UserActivity"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentActivities(Int32) on controller PersonaXFleet.Controllers.UserActivityController (PersonaXFleet).
2025-08-11 08:03:45.446 +00:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:03:45.468 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:03:45.468 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:03:45.470 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:03:45.470 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:03:45.470 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:03:45.470 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:03:45.470 +00:00 [INF] Route matched with {action = "GetMyPendingActions", controller = "MaintenanceRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPendingActions(System.String) on controller PersonaXFleet.Controllers.MaintenanceRequestController (PersonaXFleet).
2025-08-11 08:03:45.470 +00:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:03:45.475 +00:00 [INF] Executed DbCommand (20ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[ActionLink], [n].[CreatedAt], [n].[IsDeleted], [n].[IsRead], [n].[Message], [n].[RelatedEntityId], [n].[Title], [n].[Type], [n].[UserId], [n].[Username]
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsDeleted] = CAST(0 AS bit)
ORDER BY [n].[CreatedAt] DESC
2025-08-11 08:03:45.475 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.Notification, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:03:45.475 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet) in 24.7574ms
2025-08-11 08:03:45.475 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:03:45.476 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 31.9527ms
2025-08-11 08:03:45.482 +00:00 [INF] Executed DbCommand (28ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ActivityType], [t].[Description], [t].[Details], [t].[DurationMs], [t].[EntityId], [t].[EntityType], [t].[ErrorMessage], [t].[IpAddress], [t].[IsSuccessful], [t].[Module], [t].[NewValues], [t].[OldValues], [t].[PageUrl], [t].[SessionId], [t].[Timestamp], [t].[UserAgent], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Department], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsActive], [a].[LastActivityDate], [a].[LastLoginDate], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[MustChangePassword], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [u].[Id], [u].[ActivityType], [u].[Description], [u].[Details], [u].[DurationMs], [u].[EntityId], [u].[EntityType], [u].[ErrorMessage], [u].[IpAddress], [u].[IsSuccessful], [u].[Module], [u].[NewValues], [u].[OldValues], [u].[PageUrl], [u].[SessionId], [u].[Timestamp], [u].[UserAgent], [u].[UserId]
    FROM [UserActivities] AS [u]
    ORDER BY [u].[Timestamp] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
ORDER BY [t].[Timestamp] DESC
2025-08-11 08:03:45.486 +00:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsRead] = CAST(0 AS bit) AND [n].[IsDeleted] = CAST(0 AS bit)
2025-08-11 08:03:45.487 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.UserActivity, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:03:45.487 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType69`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:03:45.488 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet) in 18.501ms
2025-08-11 08:03:45.488 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:03:45.490 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 22.4452ms
2025-08-11 08:03:45.511 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:03:45.512 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:03:45.512 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:03:45.512 +00:00 [INF] Executed action PersonaXFleet.Controllers.UserActivityController.GetRecentActivities (PersonaXFleet) in 66.2925ms
2025-08-11 08:03:45.512 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.UserActivityController.GetRecentActivities (PersonaXFleet)'
2025-08-11 08:03:45.512 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:03:45.515 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/UserActivity/recent?limit=4 - 200 null application/json; charset=utf-8 72.3686ms
2025-08-11 08:03:45.512 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:03:45.515 +00:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:03:45.515 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:03:45.515 +00:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:03:45.527 +00:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsRead] = CAST(0 AS bit) AND [n].[IsDeleted] = CAST(0 AS bit)
2025-08-11 08:03:45.527 +00:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[ActionLink], [n].[CreatedAt], [n].[IsDeleted], [n].[IsRead], [n].[Message], [n].[RelatedEntityId], [n].[Title], [n].[Type], [n].[UserId], [n].[Username]
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsDeleted] = CAST(0 AS bit)
ORDER BY [n].[CreatedAt] DESC
2025-08-11 08:03:45.546 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.Notification, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:03:45.548 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType69`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:03:45.550 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet) in 34.6738ms
2025-08-11 08:03:45.550 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet) in 35.0815ms
2025-08-11 08:03:45.551 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:03:45.551 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:03:45.552 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 40.9957ms
2025-08-11 08:03:45.553 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 41.7268ms
2025-08-11 08:03:45.597 +00:00 [INF] Executed DbCommand (114ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MaintenanceId], [m].[VehicleId], [v].[Make], [v].[Model], [v].[LicensePlate], [m].[RequestType], [m].[Description], [m].[RequestDate], [m].[Status], [m].[Priority], [m].[EstimatedCost], [m].[AdminComments], [m].[RequestedByUserId], [a].[UserName], [m].[Department], [m].[CurrentStage], [r].[Name]
FROM [UserRouteRoles] AS [u]
INNER JOIN [MaintenanceRequests] AS [m] ON [u].[RouteId] = [m].[CurrentRouteId]
INNER JOIN [Vehicles] AS [v] ON [m].[VehicleId] = [v].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RequestedByUserId] = [a].[Id]
LEFT JOIN [Routes] AS [r] ON [m].[CurrentRouteId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0 AND [u].[Role] = [m].[CurrentStage] AND NOT EXISTS (
    SELECT 1
    FROM [MaintenanceTransactions] AS [m0]
    WHERE [m0].[MaintenanceRequestId] = [m].[MaintenanceId] AND [m0].[Action] = [m].[CurrentStage] AND [m0].[UserId] = [u].[UserId] AND [m0].[IsCompleted] = CAST(1 AS bit))
2025-08-11 08:03:45.598 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.MaintenanceRequestDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:03:45.598 +00:00 [INF] Executed action PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet) in 128.1442ms
2025-08-11 08:03:45.598 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:03:45.598 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 129.9041ms
2025-08-11 08:03:45.602 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:03:45.603 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:03:45.603 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:03:45.603 +00:00 [INF] Route matched with {action = "GetMyPendingActions", controller = "MaintenanceRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPendingActions(System.String) on controller PersonaXFleet.Controllers.MaintenanceRequestController (PersonaXFleet).
2025-08-11 08:03:45.609 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MaintenanceId], [m].[VehicleId], [v].[Make], [v].[Model], [v].[LicensePlate], [m].[RequestType], [m].[Description], [m].[RequestDate], [m].[Status], [m].[Priority], [m].[EstimatedCost], [m].[AdminComments], [m].[RequestedByUserId], [a].[UserName], [m].[Department], [m].[CurrentStage], [r].[Name]
FROM [UserRouteRoles] AS [u]
INNER JOIN [MaintenanceRequests] AS [m] ON [u].[RouteId] = [m].[CurrentRouteId]
INNER JOIN [Vehicles] AS [v] ON [m].[VehicleId] = [v].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RequestedByUserId] = [a].[Id]
LEFT JOIN [Routes] AS [r] ON [m].[CurrentRouteId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0 AND [u].[Role] = [m].[CurrentStage] AND NOT EXISTS (
    SELECT 1
    FROM [MaintenanceTransactions] AS [m0]
    WHERE [m0].[MaintenanceRequestId] = [m].[MaintenanceId] AND [m0].[Action] = [m].[CurrentStage] AND [m0].[UserId] = [u].[UserId] AND [m0].[IsCompleted] = CAST(1 AS bit))
2025-08-11 08:03:45.610 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.MaintenanceRequestDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:03:45.610 +00:00 [INF] Executed action PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet) in 7.4439ms
2025-08-11 08:03:45.610 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:03:45.611 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 8.9944ms
2025-08-11 08:04:45.457 +00:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7092/api/Auth/activity/ping - null null
2025-08-11 08:04:45.458 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:04:45.459 +00:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7092/api/Auth/activity/ping - 204 null null 13.6551ms
2025-08-11 08:04:45.468 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:04:45.469 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:04:45.483 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:04:45.483 +00:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:04:45.488 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:04:45.489 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:04:45.489 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:04:45.489 +00:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:04:45.489 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:04:45.489 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:04:45.491 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:04:45.492 +00:00 [INF] Route matched with {action = "GetMyPendingActions", controller = "MaintenanceRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPendingActions(System.String) on controller PersonaXFleet.Controllers.MaintenanceRequestController (PersonaXFleet).
2025-08-11 08:04:45.512 +00:00 [INF] Executed DbCommand (19ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsRead] = CAST(0 AS bit) AND [n].[IsDeleted] = CAST(0 AS bit)
2025-08-11 08:04:45.515 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType69`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:04:45.515 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet) in 25.992ms
2025-08-11 08:04:45.515 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:04:45.519 +00:00 [INF] Executed DbCommand (28ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[ActionLink], [n].[CreatedAt], [n].[IsDeleted], [n].[IsRead], [n].[Message], [n].[RelatedEntityId], [n].[Title], [n].[Type], [n].[UserId], [n].[Username]
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsDeleted] = CAST(0 AS bit)
ORDER BY [n].[CreatedAt] DESC
2025-08-11 08:04:45.521 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.Notification, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:04:45.521 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet) in 37.7389ms
2025-08-11 08:04:45.521 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:04:45.524 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 52.9191ms
2025-08-11 08:04:45.525 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 36.6988ms
2025-08-11 08:04:45.525 +00:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/activity/ping - application/json 49
2025-08-11 08:04:45.526 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:04:45.527 +00:00 [INF] Executing endpoint 'FleetIdentityServer.Controllers.Auth.PingActivity (PersonaXFleet)'
2025-08-11 08:04:45.527 +00:00 [INF] Route matched with {action = "PingActivity", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PingActivity(FleetIdentityServer.Controllers.PingActivityRequest) on controller FleetIdentityServer.Controllers.Auth (PersonaXFleet).
2025-08-11 08:04:45.532 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:04:45.532 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:04:45.532 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:04:45.532 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:04:45.535 +00:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:04:45.536 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:04:45.537 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:04:45.537 +00:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:04:45.543 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsRead] = CAST(0 AS bit) AND [n].[IsDeleted] = CAST(0 AS bit)
2025-08-11 08:04:45.545 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType69`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:04:45.548 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet) in 11.9815ms
2025-08-11 08:04:45.549 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:04:45.550 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[ActionLink], [n].[CreatedAt], [n].[IsDeleted], [n].[IsRead], [n].[Message], [n].[RelatedEntityId], [n].[Title], [n].[Type], [n].[UserId], [n].[Username]
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsDeleted] = CAST(0 AS bit)
ORDER BY [n].[CreatedAt] DESC
2025-08-11 08:04:45.552 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 20.7208ms
2025-08-11 08:04:45.552 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.Notification, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:04:45.553 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet) in 15.8429ms
2025-08-11 08:04:45.553 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:04:45.572 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 40.4835ms
2025-08-11 08:04:45.572 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Department], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsActive], [a].[LastActivityDate], [a].[LastLoginDate], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[MustChangePassword], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-08-11 08:04:45.587 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Department], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsActive], [a].[LastActivityDate], [a].[LastLoginDate], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[MustChangePassword], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-08-11 08:04:45.592 +00:00 [INF] Executed DbCommand (77ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MaintenanceId], [m].[VehicleId], [v].[Make], [v].[Model], [v].[LicensePlate], [m].[RequestType], [m].[Description], [m].[RequestDate], [m].[Status], [m].[Priority], [m].[EstimatedCost], [m].[AdminComments], [m].[RequestedByUserId], [a].[UserName], [m].[Department], [m].[CurrentStage], [r].[Name]
FROM [UserRouteRoles] AS [u]
INNER JOIN [MaintenanceRequests] AS [m] ON [u].[RouteId] = [m].[CurrentRouteId]
INNER JOIN [Vehicles] AS [v] ON [m].[VehicleId] = [v].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RequestedByUserId] = [a].[Id]
LEFT JOIN [Routes] AS [r] ON [m].[CurrentRouteId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0 AND [u].[Role] = [m].[CurrentStage] AND NOT EXISTS (
    SELECT 1
    FROM [MaintenanceTransactions] AS [m0]
    WHERE [m0].[MaintenanceRequestId] = [m].[MaintenanceId] AND [m0].[Action] = [m].[CurrentStage] AND [m0].[UserId] = [u].[UserId] AND [m0].[IsCompleted] = CAST(1 AS bit))
2025-08-11 08:04:45.592 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.MaintenanceRequestDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:04:45.592 +00:00 [INF] Executed action PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet) in 100.4331ms
2025-08-11 08:04:45.593 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:04:45.593 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 103.8301ms
2025-08-11 08:04:45.595 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:04:45.595 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:04:45.596 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:04:45.596 +00:00 [INF] Route matched with {action = "GetMyPendingActions", controller = "MaintenanceRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPendingActions(System.String) on controller PersonaXFleet.Controllers.MaintenanceRequestController (PersonaXFleet).
2025-08-11 08:04:45.601 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MaintenanceId], [m].[VehicleId], [v].[Make], [v].[Model], [v].[LicensePlate], [m].[RequestType], [m].[Description], [m].[RequestDate], [m].[Status], [m].[Priority], [m].[EstimatedCost], [m].[AdminComments], [m].[RequestedByUserId], [a].[UserName], [m].[Department], [m].[CurrentStage], [r].[Name]
FROM [UserRouteRoles] AS [u]
INNER JOIN [MaintenanceRequests] AS [m] ON [u].[RouteId] = [m].[CurrentRouteId]
INNER JOIN [Vehicles] AS [v] ON [m].[VehicleId] = [v].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RequestedByUserId] = [a].[Id]
LEFT JOIN [Routes] AS [r] ON [m].[CurrentRouteId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0 AND [u].[Role] = [m].[CurrentStage] AND NOT EXISTS (
    SELECT 1
    FROM [MaintenanceTransactions] AS [m0]
    WHERE [m0].[MaintenanceRequestId] = [m].[MaintenanceId] AND [m0].[Action] = [m].[CurrentStage] AND [m0].[UserId] = [u].[UserId] AND [m0].[IsCompleted] = CAST(1 AS bit))
2025-08-11 08:04:45.602 +00:00 [INF] Executed DbCommand (14ms) [Parameters=[@p21='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p22='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime2), @p8='?' (DbType = DateTime2), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (DbType = Boolean), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Department] = @p2, [Email] = @p3, [EmailConfirmed] = @p4, [FullName] = @p5, [IsActive] = @p6, [LastActivityDate] = @p7, [LastLoginDate] = @p8, [LockoutEnabled] = @p9, [LockoutEnd] = @p10, [MustChangePassword] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [ProfilePicture] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UserName] = @p20
OUTPUT 1
WHERE [Id] = @p21 AND [ConcurrencyStamp] = @p22;
2025-08-11 08:04:45.603 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.MaintenanceRequestDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:04:45.603 +00:00 [INF] Executed action PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet) in 7.0859ms
2025-08-11 08:04:45.603 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:04:45.604 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 9.5918ms
2025-08-11 08:04:45.604 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType15`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:04:45.604 +00:00 [INF] Executed action FleetIdentityServer.Controllers.Auth.PingActivity (PersonaXFleet) in 76.9341ms
2025-08-11 08:04:45.604 +00:00 [INF] Executed endpoint 'FleetIdentityServer.Controllers.Auth.PingActivity (PersonaXFleet)'
2025-08-11 08:04:45.604 +00:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/activity/ping - 200 null application/json; charset=utf-8 79.4431ms
2025-08-11 08:05:45.520 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:05:45.521 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:05:45.521 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:05:45.521 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:05:45.521 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:05:45.521 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:05:45.521 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/UserActivity/recent?limit=4 - null null
2025-08-11 08:05:45.521 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:05:45.521 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:05:45.524 +00:00 [INF] Route matched with {action = "GetMyPendingActions", controller = "MaintenanceRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPendingActions(System.String) on controller PersonaXFleet.Controllers.MaintenanceRequestController (PersonaXFleet).
2025-08-11 08:05:45.521 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:05:45.521 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:05:45.524 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.UserActivityController.GetRecentActivities (PersonaXFleet)'
2025-08-11 08:05:45.524 +00:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:05:45.524 +00:00 [INF] Route matched with {action = "GetRecentActivities", controller = "UserActivity"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentActivities(Int32) on controller PersonaXFleet.Controllers.UserActivityController (PersonaXFleet).
2025-08-11 08:05:45.524 +00:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:05:45.557 +00:00 [INF] Executed DbCommand (22ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[ActionLink], [n].[CreatedAt], [n].[IsDeleted], [n].[IsRead], [n].[Message], [n].[RelatedEntityId], [n].[Title], [n].[Type], [n].[UserId], [n].[Username]
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsDeleted] = CAST(0 AS bit)
ORDER BY [n].[CreatedAt] DESC
2025-08-11 08:05:45.564 +00:00 [INF] Executed DbCommand (30ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ActivityType], [t].[Description], [t].[Details], [t].[DurationMs], [t].[EntityId], [t].[EntityType], [t].[ErrorMessage], [t].[IpAddress], [t].[IsSuccessful], [t].[Module], [t].[NewValues], [t].[OldValues], [t].[PageUrl], [t].[SessionId], [t].[Timestamp], [t].[UserAgent], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Department], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsActive], [a].[LastActivityDate], [a].[LastLoginDate], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[MustChangePassword], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [u].[Id], [u].[ActivityType], [u].[Description], [u].[Details], [u].[DurationMs], [u].[EntityId], [u].[EntityType], [u].[ErrorMessage], [u].[IpAddress], [u].[IsSuccessful], [u].[Module], [u].[NewValues], [u].[OldValues], [u].[PageUrl], [u].[SessionId], [u].[Timestamp], [u].[UserAgent], [u].[UserId]
    FROM [UserActivities] AS [u]
    ORDER BY [u].[Timestamp] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
ORDER BY [t].[Timestamp] DESC
2025-08-11 08:05:45.572 +00:00 [INF] Executed DbCommand (38ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsRead] = CAST(0 AS bit) AND [n].[IsDeleted] = CAST(0 AS bit)
2025-08-11 08:05:45.599 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType69`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:05:45.602 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.UserActivity, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:05:45.608 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet) in 83.5212ms
2025-08-11 08:05:45.609 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:05:45.609 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:05:45.609 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.Notification, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:05:45.610 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:05:45.610 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:05:45.611 +00:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:05:45.614 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet) in 89.5104ms
2025-08-11 08:05:45.615 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:05:45.615 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:05:45.616 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:05:45.616 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:05:45.616 +00:00 [INF] Executed action PersonaXFleet.Controllers.UserActivityController.GetRecentActivities (PersonaXFleet) in 91.7617ms
2025-08-11 08:05:45.617 +00:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:05:45.617 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.UserActivityController.GetRecentActivities (PersonaXFleet)'
2025-08-11 08:05:45.617 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 97.498ms
2025-08-11 08:05:45.619 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/UserActivity/recent?limit=4 - 200 null application/json; charset=utf-8 98.372ms
2025-08-11 08:05:45.619 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 98.2864ms
2025-08-11 08:05:45.621 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsRead] = CAST(0 AS bit) AND [n].[IsDeleted] = CAST(0 AS bit)
2025-08-11 08:05:45.623 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType69`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:05:45.623 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet) in 10.5822ms
2025-08-11 08:05:45.624 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:05:45.624 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 15.4048ms
2025-08-11 08:05:45.626 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[ActionLink], [n].[CreatedAt], [n].[IsDeleted], [n].[IsRead], [n].[Message], [n].[RelatedEntityId], [n].[Title], [n].[Type], [n].[UserId], [n].[Username]
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsDeleted] = CAST(0 AS bit)
ORDER BY [n].[CreatedAt] DESC
2025-08-11 08:05:45.628 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.Notification, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:05:45.629 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet) in 11.7729ms
2025-08-11 08:05:45.629 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:05:45.629 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 13.6978ms
2025-08-11 08:05:45.647 +00:00 [INF] Executed DbCommand (58ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MaintenanceId], [m].[VehicleId], [v].[Make], [v].[Model], [v].[LicensePlate], [m].[RequestType], [m].[Description], [m].[RequestDate], [m].[Status], [m].[Priority], [m].[EstimatedCost], [m].[AdminComments], [m].[RequestedByUserId], [a].[UserName], [m].[Department], [m].[CurrentStage], [r].[Name]
FROM [UserRouteRoles] AS [u]
INNER JOIN [MaintenanceRequests] AS [m] ON [u].[RouteId] = [m].[CurrentRouteId]
INNER JOIN [Vehicles] AS [v] ON [m].[VehicleId] = [v].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RequestedByUserId] = [a].[Id]
LEFT JOIN [Routes] AS [r] ON [m].[CurrentRouteId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0 AND [u].[Role] = [m].[CurrentStage] AND NOT EXISTS (
    SELECT 1
    FROM [MaintenanceTransactions] AS [m0]
    WHERE [m0].[MaintenanceRequestId] = [m].[MaintenanceId] AND [m0].[Action] = [m].[CurrentStage] AND [m0].[UserId] = [u].[UserId] AND [m0].[IsCompleted] = CAST(1 AS bit))
2025-08-11 08:05:45.647 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.MaintenanceRequestDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:05:45.647 +00:00 [INF] Executed action PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet) in 123.363ms
2025-08-11 08:05:45.648 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:05:45.648 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 127.1453ms
2025-08-11 08:05:45.650 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:05:45.650 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:05:45.650 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:05:45.650 +00:00 [INF] Route matched with {action = "GetMyPendingActions", controller = "MaintenanceRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPendingActions(System.String) on controller PersonaXFleet.Controllers.MaintenanceRequestController (PersonaXFleet).
2025-08-11 08:05:45.655 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MaintenanceId], [m].[VehicleId], [v].[Make], [v].[Model], [v].[LicensePlate], [m].[RequestType], [m].[Description], [m].[RequestDate], [m].[Status], [m].[Priority], [m].[EstimatedCost], [m].[AdminComments], [m].[RequestedByUserId], [a].[UserName], [m].[Department], [m].[CurrentStage], [r].[Name]
FROM [UserRouteRoles] AS [u]
INNER JOIN [MaintenanceRequests] AS [m] ON [u].[RouteId] = [m].[CurrentRouteId]
INNER JOIN [Vehicles] AS [v] ON [m].[VehicleId] = [v].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RequestedByUserId] = [a].[Id]
LEFT JOIN [Routes] AS [r] ON [m].[CurrentRouteId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0 AND [u].[Role] = [m].[CurrentStage] AND NOT EXISTS (
    SELECT 1
    FROM [MaintenanceTransactions] AS [m0]
    WHERE [m0].[MaintenanceRequestId] = [m].[MaintenanceId] AND [m0].[Action] = [m].[CurrentStage] AND [m0].[UserId] = [u].[UserId] AND [m0].[IsCompleted] = CAST(1 AS bit))
2025-08-11 08:05:45.657 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.MaintenanceRequestDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:05:45.658 +00:00 [INF] Executed action PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet) in 7.0249ms
2025-08-11 08:05:45.658 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:05:45.658 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 8.2596ms
2025-08-11 08:05:59.286 +00:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7092/api/auth/verify - null null
2025-08-11 08:05:59.287 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:05:59.287 +00:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7092/api/auth/verify - 204 null null 1.2189ms
2025-08-11 08:05:59.291 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/auth/verify - null null
2025-08-11 08:05:59.292 +00:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7092/api/Auth/activity/ping - null null
2025-08-11 08:05:59.293 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:05:59.293 +00:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7092/api/UserActivity/log - null null
2025-08-11 08:05:59.293 +00:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7092/api/Auth/activity/ping - 204 null null 0.8162ms
2025-08-11 08:05:59.293 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:05:59.293 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:05:59.293 +00:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7092/api/UserActivity/log - 204 null null 0.7903ms
2025-08-11 08:05:59.293 +00:00 [INF] Executing endpoint 'FleetIdentityServer.Controllers.Auth.Verify (PersonaXFleet)'
2025-08-11 08:05:59.294 +00:00 [INF] Route matched with {action = "Verify", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Verify() on controller FleetIdentityServer.Controllers.Auth (PersonaXFleet).
2025-08-11 08:05:59.300 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:05:59.300 +00:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/activity/ping - application/json 49
2025-08-11 08:05:59.301 +00:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/UserActivity/log - application/json 413
2025-08-11 08:05:59.301 +00:00 [INF] Executed action FleetIdentityServer.Controllers.Auth.Verify (PersonaXFleet) in 6.4446ms
2025-08-11 08:05:59.301 +00:00 [INF] Executed endpoint 'FleetIdentityServer.Controllers.Auth.Verify (PersonaXFleet)'
2025-08-11 08:05:59.301 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:05:59.301 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:05:59.301 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/auth/verify - 200 null application/json; charset=utf-8 10.3131ms
2025-08-11 08:05:59.301 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.UserActivityController.LogActivity (PersonaXFleet)'
2025-08-11 08:05:59.301 +00:00 [INF] Executing endpoint 'FleetIdentityServer.Controllers.Auth.PingActivity (PersonaXFleet)'
2025-08-11 08:05:59.301 +00:00 [INF] Route matched with {action = "PingActivity", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PingActivity(FleetIdentityServer.Controllers.PingActivityRequest) on controller FleetIdentityServer.Controllers.Auth (PersonaXFleet).
2025-08-11 08:05:59.301 +00:00 [INF] Route matched with {action = "LogActivity", controller = "UserActivity"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LogActivity(PersonaXFleet.Controllers.LogActivityRequest) on controller PersonaXFleet.Controllers.UserActivityController (PersonaXFleet).
2025-08-11 08:05:59.302 +00:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-08-11 08:05:59.303 +00:00 [INF] Executed action PersonaXFleet.Controllers.UserActivityController.LogActivity (PersonaXFleet) in 1.1426ms
2025-08-11 08:05:59.303 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.UserActivityController.LogActivity (PersonaXFleet)'
2025-08-11 08:05:59.303 +00:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/UserActivity/log - 400 null application/problem+json; charset=utf-8 2.3044ms
2025-08-11 08:05:59.308 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/auth/verify - null null
2025-08-11 08:05:59.311 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:05:59.312 +00:00 [INF] Executing endpoint 'FleetIdentityServer.Controllers.Auth.Verify (PersonaXFleet)'
2025-08-11 08:05:59.312 +00:00 [INF] Route matched with {action = "Verify", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Verify() on controller FleetIdentityServer.Controllers.Auth (PersonaXFleet).
2025-08-11 08:05:59.314 +00:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Department], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsActive], [a].[LastActivityDate], [a].[LastLoginDate], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[MustChangePassword], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-08-11 08:05:59.315 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:05:59.316 +00:00 [INF] Executed action FleetIdentityServer.Controllers.Auth.Verify (PersonaXFleet) in 3.9145ms
2025-08-11 08:05:59.322 +00:00 [INF] Executed endpoint 'FleetIdentityServer.Controllers.Auth.Verify (PersonaXFleet)'
2025-08-11 08:05:59.322 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/auth/verify - 200 null application/json; charset=utf-8 14.5644ms
2025-08-11 08:05:59.325 +00:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Department], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsActive], [a].[LastActivityDate], [a].[LastLoginDate], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[MustChangePassword], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-08-11 08:05:59.338 +00:00 [INF] Executed DbCommand (12ms) [Parameters=[@p21='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p22='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime2), @p8='?' (DbType = DateTime2), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (DbType = Boolean), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Department] = @p2, [Email] = @p3, [EmailConfirmed] = @p4, [FullName] = @p5, [IsActive] = @p6, [LastActivityDate] = @p7, [LastLoginDate] = @p8, [LockoutEnabled] = @p9, [LockoutEnd] = @p10, [MustChangePassword] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [ProfilePicture] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UserName] = @p20
OUTPUT 1
WHERE [Id] = @p21 AND [ConcurrencyStamp] = @p22;
2025-08-11 08:05:59.339 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType15`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:05:59.339 +00:00 [INF] Executed action FleetIdentityServer.Controllers.Auth.PingActivity (PersonaXFleet) in 37.4083ms
2025-08-11 08:05:59.339 +00:00 [INF] Executed endpoint 'FleetIdentityServer.Controllers.Auth.PingActivity (PersonaXFleet)'
2025-08-11 08:05:59.339 +00:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/activity/ping - 200 null application/json; charset=utf-8 38.8255ms
2025-08-11 08:05:59.676 +00:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7092/api/vehicles - null null
2025-08-11 08:05:59.676 +00:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7092/api/VehicleAssignment/AllRequests?status=Pending - null null
2025-08-11 08:05:59.676 +00:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7092/api/Auth/users - null null
2025-08-11 08:05:59.676 +00:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7092/api/VehicleAssignment/AllAssignments - null null
2025-08-11 08:05:59.677 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:05:59.677 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:05:59.677 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:05:59.677 +00:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7092/api/VehicleAssignment/AllAssignments - 204 null null 0.7605ms
2025-08-11 08:05:59.677 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:05:59.677 +00:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7092/api/VehicleAssignment/AllRequests?status=Pending - 204 null null 0.7215ms
2025-08-11 08:05:59.677 +00:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7092/api/vehicles - 204 null null 0.7888ms
2025-08-11 08:05:59.677 +00:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7092/api/Auth/users - 204 null null 0.8135ms
2025-08-11 08:05:59.684 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/VehicleAssignment/AllRequests?status=Pending - null null
2025-08-11 08:05:59.684 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/vehicles - null null
2025-08-11 08:05:59.684 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Auth/users - null null
2025-08-11 08:05:59.684 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/VehicleAssignment/AllAssignments - null null
2025-08-11 08:05:59.684 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:05:59.684 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:05:59.684 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.VehicleAssignmentController.GetAllRequests (PersonaXFleet)'
2025-08-11 08:05:59.684 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:05:59.684 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.VehiclesController.GetVehicles (PersonaXFleet)'
2025-08-11 08:05:59.684 +00:00 [INF] Executing endpoint 'FleetIdentityServer.Controllers.Auth.GetAllUsers (PersonaXFleet)'
2025-08-11 08:05:59.684 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:05:59.684 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.VehicleAssignmentController.GetAllAssignments (PersonaXFleet)'
2025-08-11 08:05:59.684 +00:00 [INF] Route matched with {action = "GetAllRequests", controller = "VehicleAssignment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllRequests() on controller PersonaXFleet.Controllers.VehicleAssignmentController (PersonaXFleet).
2025-08-11 08:05:59.684 +00:00 [INF] Route matched with {action = "GetVehicles", controller = "Vehicles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[PersonaXFleet.DTOs.VehicleDto]]] GetVehicles() on controller PersonaXFleet.Controllers.VehiclesController (PersonaXFleet).
2025-08-11 08:05:59.684 +00:00 [INF] Route matched with {action = "GetAllAssignments", controller = "VehicleAssignment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllAssignments() on controller PersonaXFleet.Controllers.VehicleAssignmentController (PersonaXFleet).
2025-08-11 08:05:59.693 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [v].[Id], [v].[Color], [v].[CurrentMileage], [v].[EngineSize], [v].[FuelType], [v].[InsuranceExpiry], [v].[LastServiceDate], [v].[LicensePlate], [v].[Make], [v].[Model], [v].[NextServiceDue], [v].[Notes], [v].[PurchaseDate], [v].[PurchasePrice], [v].[RegistrationExpiry], [v].[RoadworthyExpiry], [v].[SeatingCapacity], [v].[ServiceInterval], [v].[Status], [v].[Transmission], [v].[UserId], [v].[VIN], [v].[VehicleType], [v].[Year]
FROM [Vehicles] AS [v]
2025-08-11 08:05:59.697 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:05:59.698 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.VehicleDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:05:59.698 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:05:59.698 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:05:59.699 +00:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:05:59.699 +00:00 [INF] Executed action PersonaXFleet.Controllers.VehiclesController.GetVehicles (PersonaXFleet) in 14.1443ms
2025-08-11 08:05:59.699 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.VehiclesController.GetVehicles (PersonaXFleet)'
2025-08-11 08:05:59.699 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/vehicles - 200 null application/json; charset=utf-8 15.3654ms
2025-08-11 08:05:59.702 +00:00 [INF] Route matched with {action = "GetAllUsers", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllUsers() on controller FleetIdentityServer.Controllers.Auth (PersonaXFleet).
2025-08-11 08:05:59.707 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/vehicles - null null
2025-08-11 08:05:59.707 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsRead] = CAST(0 AS bit) AND [n].[IsDeleted] = CAST(0 AS bit)
2025-08-11 08:05:59.707 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:05:59.707 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.VehiclesController.GetVehicles (PersonaXFleet)'
2025-08-11 08:05:59.707 +00:00 [INF] Route matched with {action = "GetVehicles", controller = "Vehicles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[PersonaXFleet.DTOs.VehicleDto]]] GetVehicles() on controller PersonaXFleet.Controllers.VehiclesController (PersonaXFleet).
2025-08-11 08:05:59.707 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType69`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:05:59.707 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet) in 8.653ms
2025-08-11 08:05:59.707 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:05:59.707 +00:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [v].[Id], [v].[UserId], [v].[Make], [v].[Model], [v].[LicensePlate], [a].[UserName], [a].[Email]
FROM [Vehicles] AS [v]
LEFT JOIN [AspNetUsers] AS [a] ON [v].[UserId] = [a].[Id]
WHERE [v].[UserId] IS NOT NULL
2025-08-11 08:05:59.708 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.VehicleAssignmentDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:05:59.708 +00:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [v].[Id], [v].[UserId], [a].[UserName], [a].[Email], [v].[RequestReason], [v].[RequestDate], [v].[Status], [v].[CurrentStage], [r].[Name] AS [RouteName], [v0].[Id], [v0].[Make], [v0].[Model], [v0].[LicensePlate]
FROM [VehicleAssignmentRequests] AS [v]
INNER JOIN [AspNetUsers] AS [a] ON [v].[UserId] = [a].[Id]
INNER JOIN [Routes] AS [r] ON [v].[CurrentRouteId] = [r].[Id]
INNER JOIN [Vehicles] AS [v0] ON [v].[VehicleId] = [v0].[Id]
ORDER BY [v].[RequestDate] DESC
2025-08-11 08:05:59.708 +00:00 [INF] Executed action PersonaXFleet.Controllers.VehicleAssignmentController.GetAllAssignments (PersonaXFleet) in 23.3735ms
2025-08-11 08:05:59.708 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.VehicleAssignmentController.GetAllAssignments (PersonaXFleet)'
2025-08-11 08:05:59.708 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType82`10[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[PersonaXFleet.Models.Enums.VehicleRequestStatus, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType34`4[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:05:59.708 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/VehicleAssignment/AllAssignments - 200 null application/json; charset=utf-8 24.2466ms
2025-08-11 08:05:59.709 +00:00 [INF] Executed action PersonaXFleet.Controllers.VehicleAssignmentController.GetAllRequests (PersonaXFleet) in 24.2115ms
2025-08-11 08:05:59.709 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.VehicleAssignmentController.GetAllRequests (PersonaXFleet)'
2025-08-11 08:05:59.709 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/VehicleAssignment/AllRequests?status=Pending - 200 null application/json; charset=utf-8 25.8824ms
2025-08-11 08:05:59.707 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 10.3148ms
2025-08-11 08:05:59.711 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:05:59.711 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:05:59.711 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:05:59.713 +00:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:05:59.713 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/VehicleAssignment/AllAssignments - null null
2025-08-11 08:05:59.715 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:05:59.721 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.VehicleAssignmentController.GetAllAssignments (PersonaXFleet)'
2025-08-11 08:05:59.722 +00:00 [INF] Route matched with {action = "GetAllAssignments", controller = "VehicleAssignment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllAssignments() on controller PersonaXFleet.Controllers.VehicleAssignmentController (PersonaXFleet).
2025-08-11 08:05:59.722 +00:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [v].[Id], [v].[Color], [v].[CurrentMileage], [v].[EngineSize], [v].[FuelType], [v].[InsuranceExpiry], [v].[LastServiceDate], [v].[LicensePlate], [v].[Make], [v].[Model], [v].[NextServiceDue], [v].[Notes], [v].[PurchaseDate], [v].[PurchasePrice], [v].[RegistrationExpiry], [v].[RoadworthyExpiry], [v].[SeatingCapacity], [v].[ServiceInterval], [v].[Status], [v].[Transmission], [v].[UserId], [v].[VIN], [v].[VehicleType], [v].[Year]
FROM [Vehicles] AS [v]
2025-08-11 08:05:59.727 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.VehicleDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:05:59.728 +00:00 [INF] Executed action PersonaXFleet.Controllers.VehiclesController.GetVehicles (PersonaXFleet) in 20.6698ms
2025-08-11 08:05:59.728 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.VehiclesController.GetVehicles (PersonaXFleet)'
2025-08-11 08:05:59.728 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/vehicles - 200 null application/json; charset=utf-8 24.6702ms
2025-08-11 08:05:59.733 +00:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsRead] = CAST(0 AS bit) AND [n].[IsDeleted] = CAST(0 AS bit)
2025-08-11 08:05:59.736 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/VehicleAssignment/AllRequests?status=Pending - null null
2025-08-11 08:05:59.742 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:05:59.743 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.VehicleAssignmentController.GetAllRequests (PersonaXFleet)'
2025-08-11 08:05:59.743 +00:00 [INF] Route matched with {action = "GetAllRequests", controller = "VehicleAssignment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllRequests() on controller PersonaXFleet.Controllers.VehicleAssignmentController (PersonaXFleet).
2025-08-11 08:05:59.787 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType69`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:05:59.788 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet) in 74.6387ms
2025-08-11 08:05:59.788 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:05:59.789 +00:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [v].[Id], [v].[UserId], [v].[Make], [v].[Model], [v].[LicensePlate], [a].[UserName], [a].[Email]
FROM [Vehicles] AS [v]
LEFT JOIN [AspNetUsers] AS [a] ON [v].[UserId] = [a].[Id]
WHERE [v].[UserId] IS NOT NULL
2025-08-11 08:05:59.792 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.VehicleAssignmentDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:05:59.792 +00:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [v].[Id], [v].[UserId], [a].[UserName], [a].[Email], [v].[RequestReason], [v].[RequestDate], [v].[Status], [v].[CurrentStage], [r].[Name] AS [RouteName], [v0].[Id], [v0].[Make], [v0].[Model], [v0].[LicensePlate]
FROM [VehicleAssignmentRequests] AS [v]
INNER JOIN [AspNetUsers] AS [a] ON [v].[UserId] = [a].[Id]
INNER JOIN [Routes] AS [r] ON [v].[CurrentRouteId] = [r].[Id]
INNER JOIN [Vehicles] AS [v0] ON [v].[VehicleId] = [v0].[Id]
ORDER BY [v].[RequestDate] DESC
2025-08-11 08:05:59.795 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType82`10[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[PersonaXFleet.Models.Enums.VehicleRequestStatus, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType34`4[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:05:59.795 +00:00 [INF] Executed action PersonaXFleet.Controllers.VehicleAssignmentController.GetAllAssignments (PersonaXFleet) in 71.686ms
2025-08-11 08:05:59.796 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.VehicleAssignmentController.GetAllAssignments (PersonaXFleet)'
2025-08-11 08:05:59.796 +00:00 [INF] Executed action PersonaXFleet.Controllers.VehicleAssignmentController.GetAllRequests (PersonaXFleet) in 52.8349ms
2025-08-11 08:05:59.796 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.VehicleAssignmentController.GetAllRequests (PersonaXFleet)'
2025-08-11 08:05:59.798 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/VehicleAssignment/AllRequests?status=Pending - 200 null application/json; charset=utf-8 68.8915ms
2025-08-11 08:05:59.798 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/VehicleAssignment/AllAssignments - 200 null application/json; charset=utf-8 84.6445ms
2025-08-11 08:05:59.798 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 83.4092ms
2025-08-11 08:05:59.812 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Department], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsActive], [a].[LastActivityDate], [a].[LastLoginDate], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[MustChangePassword], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
2025-08-11 08:05:59.827 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.834 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.836 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.838 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.840 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.842 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.844 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.849 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.852 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.854 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.856 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.858 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.860 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.861 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.867 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.869 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.871 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.873 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.874 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.877 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.881 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.884 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.886 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.888 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.890 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.892 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.894 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.898 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.900 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.902 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.904 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.906 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.908 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.911 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.913 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.915 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.917 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.919 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.921 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.922 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.923 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.925 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.926 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.928 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.929 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.931 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.934 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.939 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.941 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.944 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.954 +00:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.966 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.968 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.969 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.971 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.973 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.975 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.977 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.981 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.985 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.988 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.990 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.992 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.993 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:05:59.995 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.000 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.003 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.006 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.008 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.011 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.016 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.036 +00:00 [INF] Executed DbCommand (16ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.041 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.043 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.046 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.051 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.053 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.055 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.056 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.058 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.060 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.061 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.063 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.068 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.070 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.072 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.073 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.075 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.076 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.078 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.080 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.081 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.UserDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:06:00.091 +00:00 [INF] Executed action FleetIdentityServer.Controllers.Auth.GetAllUsers (PersonaXFleet) in 389.4241ms
2025-08-11 08:06:00.091 +00:00 [INF] Executed endpoint 'FleetIdentityServer.Controllers.Auth.GetAllUsers (PersonaXFleet)'
2025-08-11 08:06:00.092 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Auth/users - 200 null application/json; charset=utf-8 408.6688ms
2025-08-11 08:06:00.093 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Auth/users - null null
2025-08-11 08:06:00.094 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:06:00.094 +00:00 [INF] Executing endpoint 'FleetIdentityServer.Controllers.Auth.GetAllUsers (PersonaXFleet)'
2025-08-11 08:06:00.094 +00:00 [INF] Route matched with {action = "GetAllUsers", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllUsers() on controller FleetIdentityServer.Controllers.Auth (PersonaXFleet).
2025-08-11 08:06:00.104 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Department], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsActive], [a].[LastActivityDate], [a].[LastLoginDate], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[MustChangePassword], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
2025-08-11 08:06:00.109 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.112 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.116 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.119 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.121 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.123 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.125 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.127 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.129 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.132 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.134 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.135 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.137 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.139 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.141 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.143 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.146 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.148 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.150 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.152 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.154 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.156 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.157 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.159 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.161 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.163 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.166 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.167 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.169 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.171 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.173 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.175 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.176 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.178 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.180 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.184 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.186 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.188 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.190 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.192 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.194 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.195 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.197 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.199 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.200 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.203 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.205 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.207 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.208 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.210 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.213 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.215 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.217 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.219 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.221 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.223 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.225 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.227 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.228 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.231 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.233 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.235 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.237 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.239 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.241 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.242 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.244 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.245 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.248 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.250 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.252 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.254 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.255 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.257 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.259 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.261 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.263 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.266 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.267 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.269 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.271 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.273 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.274 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.276 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.278 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.281 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.283 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.284 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.286 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.288 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.290 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-08-11 08:06:00.290 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.UserDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:06:00.292 +00:00 [INF] Executed action FleetIdentityServer.Controllers.Auth.GetAllUsers (PersonaXFleet) in 198.144ms
2025-08-11 08:06:00.292 +00:00 [INF] Executed endpoint 'FleetIdentityServer.Controllers.Auth.GetAllUsers (PersonaXFleet)'
2025-08-11 08:06:00.292 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Auth/users - 200 null application/json; charset=utf-8 199.2721ms
2025-08-11 08:06:04.716 +00:00 [INF] Executed DbCommand (8ms) [Parameters=[@__cutoffDate_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Department], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsActive], [a].[LastActivityDate], [a].[LastLoginDate], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[MustChangePassword], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit) AND [a].[LastActivityDate] < @__cutoffDate_0
2025-08-11 08:06:30.454 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:06:30.455 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:06:30.455 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:06:30.456 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:06:30.456 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:06:30.456 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:06:30.456 +00:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:06:30.456 +00:00 [INF] Route matched with {action = "GetMyPendingActions", controller = "MaintenanceRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPendingActions(System.String) on controller PersonaXFleet.Controllers.MaintenanceRequestController (PersonaXFleet).
2025-08-11 08:06:30.456 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:06:30.457 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:06:30.457 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:06:30.457 +00:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:06:30.468 +00:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsRead] = CAST(0 AS bit) AND [n].[IsDeleted] = CAST(0 AS bit)
2025-08-11 08:06:30.468 +00:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[ActionLink], [n].[CreatedAt], [n].[IsDeleted], [n].[IsRead], [n].[Message], [n].[RelatedEntityId], [n].[Title], [n].[Type], [n].[UserId], [n].[Username]
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsDeleted] = CAST(0 AS bit)
ORDER BY [n].[CreatedAt] DESC
2025-08-11 08:06:30.479 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType69`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:06:30.480 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet) in 22.9264ms
2025-08-11 08:06:30.481 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:06:30.488 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.Notification, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:06:30.488 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet) in 31.933ms
2025-08-11 08:06:30.489 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:06:30.490 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 33.5747ms
2025-08-11 08:06:30.490 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 35.9453ms
2025-08-11 08:06:30.508 +00:00 [INF] Executed DbCommand (39ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MaintenanceId], [m].[VehicleId], [v].[Make], [v].[Model], [v].[LicensePlate], [m].[RequestType], [m].[Description], [m].[RequestDate], [m].[Status], [m].[Priority], [m].[EstimatedCost], [m].[AdminComments], [m].[RequestedByUserId], [a].[UserName], [m].[Department], [m].[CurrentStage], [r].[Name]
FROM [UserRouteRoles] AS [u]
INNER JOIN [MaintenanceRequests] AS [m] ON [u].[RouteId] = [m].[CurrentRouteId]
INNER JOIN [Vehicles] AS [v] ON [m].[VehicleId] = [v].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RequestedByUserId] = [a].[Id]
LEFT JOIN [Routes] AS [r] ON [m].[CurrentRouteId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0 AND [u].[Role] = [m].[CurrentStage] AND NOT EXISTS (
    SELECT 1
    FROM [MaintenanceTransactions] AS [m0]
    WHERE [m0].[MaintenanceRequestId] = [m].[MaintenanceId] AND [m0].[Action] = [m].[CurrentStage] AND [m0].[UserId] = [u].[UserId] AND [m0].[IsCompleted] = CAST(1 AS bit))
2025-08-11 08:06:30.508 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.MaintenanceRequestDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:06:30.508 +00:00 [INF] Executed action PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet) in 51.8364ms
2025-08-11 08:06:30.508 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:06:30.508 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 53.8012ms
2025-08-11 08:06:45.440 +00:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7092/api/Auth/activity/ping - null null
2025-08-11 08:06:45.442 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:06:45.442 +00:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7092/api/Auth/activity/ping - 204 null null 2.7479ms
2025-08-11 08:06:45.451 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:06:45.452 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:06:45.452 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:06:45.453 +00:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/activity/ping - application/json 49
2025-08-11 08:06:45.453 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:06:45.453 +00:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:06:45.455 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:06:45.455 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:06:45.456 +00:00 [INF] Executing endpoint 'FleetIdentityServer.Controllers.Auth.PingActivity (PersonaXFleet)'
2025-08-11 08:06:45.456 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:06:45.456 +00:00 [INF] Route matched with {action = "PingActivity", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PingActivity(FleetIdentityServer.Controllers.PingActivityRequest) on controller FleetIdentityServer.Controllers.Auth (PersonaXFleet).
2025-08-11 08:06:45.456 +00:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:06:45.459 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:06:45.464 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:06:45.465 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:06:45.465 +00:00 [INF] Route matched with {action = "GetMyPendingActions", controller = "MaintenanceRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPendingActions(System.String) on controller PersonaXFleet.Controllers.MaintenanceRequestController (PersonaXFleet).
2025-08-11 08:06:45.477 +00:00 [INF] Executed DbCommand (13ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsRead] = CAST(0 AS bit) AND [n].[IsDeleted] = CAST(0 AS bit)
2025-08-11 08:06:45.485 +00:00 [INF] Executed DbCommand (21ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[ActionLink], [n].[CreatedAt], [n].[IsDeleted], [n].[IsRead], [n].[Message], [n].[RelatedEntityId], [n].[Title], [n].[Type], [n].[UserId], [n].[Username]
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsDeleted] = CAST(0 AS bit)
ORDER BY [n].[CreatedAt] DESC
2025-08-11 08:06:45.493 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType69`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:06:45.493 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.Notification, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:06:45.493 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MaintenanceId], [m].[VehicleId], [v].[Make], [v].[Model], [v].[LicensePlate], [m].[RequestType], [m].[Description], [m].[RequestDate], [m].[Status], [m].[Priority], [m].[EstimatedCost], [m].[AdminComments], [m].[RequestedByUserId], [a].[UserName], [m].[Department], [m].[CurrentStage], [r].[Name]
FROM [UserRouteRoles] AS [u]
INNER JOIN [MaintenanceRequests] AS [m] ON [u].[RouteId] = [m].[CurrentRouteId]
INNER JOIN [Vehicles] AS [v] ON [m].[VehicleId] = [v].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RequestedByUserId] = [a].[Id]
LEFT JOIN [Routes] AS [r] ON [m].[CurrentRouteId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0 AND [u].[Role] = [m].[CurrentStage] AND NOT EXISTS (
    SELECT 1
    FROM [MaintenanceTransactions] AS [m0]
    WHERE [m0].[MaintenanceRequestId] = [m].[MaintenanceId] AND [m0].[Action] = [m].[CurrentStage] AND [m0].[UserId] = [u].[UserId] AND [m0].[IsCompleted] = CAST(1 AS bit))
2025-08-11 08:06:45.494 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet) in 38.6674ms
2025-08-11 08:06:45.493 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Department], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsActive], [a].[LastActivityDate], [a].[LastLoginDate], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[MustChangePassword], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-08-11 08:06:45.493 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet) in 37.3036ms
2025-08-11 08:06:45.497 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:06:45.498 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 44.8403ms
2025-08-11 08:06:45.498 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.MaintenanceRequestDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:06:45.499 +00:00 [INF] Executed action PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet) in 33.2647ms
2025-08-11 08:06:45.499 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:06:45.500 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 41.668ms
2025-08-11 08:06:45.496 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:06:45.503 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 53.2754ms
2025-08-11 08:06:45.507 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Department], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsActive], [a].[LastActivityDate], [a].[LastLoginDate], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[MustChangePassword], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-08-11 08:06:45.517 +00:00 [INF] Executed DbCommand (9ms) [Parameters=[@p21='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p22='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime2), @p8='?' (DbType = DateTime2), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (DbType = Boolean), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Department] = @p2, [Email] = @p3, [EmailConfirmed] = @p4, [FullName] = @p5, [IsActive] = @p6, [LastActivityDate] = @p7, [LastLoginDate] = @p8, [LockoutEnabled] = @p9, [LockoutEnd] = @p10, [MustChangePassword] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [ProfilePicture] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UserName] = @p20
OUTPUT 1
WHERE [Id] = @p21 AND [ConcurrencyStamp] = @p22;
2025-08-11 08:06:45.518 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType15`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:06:45.518 +00:00 [INF] Executed action FleetIdentityServer.Controllers.Auth.PingActivity (PersonaXFleet) in 61.8472ms
2025-08-11 08:06:45.518 +00:00 [INF] Executed endpoint 'FleetIdentityServer.Controllers.Auth.PingActivity (PersonaXFleet)'
2025-08-11 08:06:45.518 +00:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/activity/ping - 200 null application/json; charset=utf-8 65.7745ms
2025-08-11 08:07:00.449 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:07:00.449 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:07:00.449 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:07:00.450 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:07:00.450 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:07:00.450 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:07:00.450 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:07:00.450 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:07:00.450 +00:00 [INF] Route matched with {action = "GetMyPendingActions", controller = "MaintenanceRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPendingActions(System.String) on controller PersonaXFleet.Controllers.MaintenanceRequestController (PersonaXFleet).
2025-08-11 08:07:00.450 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:07:00.450 +00:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:07:00.450 +00:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:07:00.452 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsRead] = CAST(0 AS bit) AND [n].[IsDeleted] = CAST(0 AS bit)
2025-08-11 08:07:00.452 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[ActionLink], [n].[CreatedAt], [n].[IsDeleted], [n].[IsRead], [n].[Message], [n].[RelatedEntityId], [n].[Title], [n].[Type], [n].[UserId], [n].[Username]
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsDeleted] = CAST(0 AS bit)
ORDER BY [n].[CreatedAt] DESC
2025-08-11 08:07:00.456 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType69`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:07:00.457 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.Notification, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:07:00.457 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet) in 6.7596ms
2025-08-11 08:07:00.458 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:07:00.458 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet) in 8.2239ms
2025-08-11 08:07:00.459 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:07:00.460 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 10.702ms
2025-08-11 08:07:00.460 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MaintenanceId], [m].[VehicleId], [v].[Make], [v].[Model], [v].[LicensePlate], [m].[RequestType], [m].[Description], [m].[RequestDate], [m].[Status], [m].[Priority], [m].[EstimatedCost], [m].[AdminComments], [m].[RequestedByUserId], [a].[UserName], [m].[Department], [m].[CurrentStage], [r].[Name]
FROM [UserRouteRoles] AS [u]
INNER JOIN [MaintenanceRequests] AS [m] ON [u].[RouteId] = [m].[CurrentRouteId]
INNER JOIN [Vehicles] AS [v] ON [m].[VehicleId] = [v].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RequestedByUserId] = [a].[Id]
LEFT JOIN [Routes] AS [r] ON [m].[CurrentRouteId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0 AND [u].[Role] = [m].[CurrentStage] AND NOT EXISTS (
    SELECT 1
    FROM [MaintenanceTransactions] AS [m0]
    WHERE [m0].[MaintenanceRequestId] = [m].[MaintenanceId] AND [m0].[Action] = [m].[CurrentStage] AND [m0].[UserId] = [u].[UserId] AND [m0].[IsCompleted] = CAST(1 AS bit))
2025-08-11 08:07:00.462 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 13.2331ms
2025-08-11 08:07:00.462 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.MaintenanceRequestDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:07:00.463 +00:00 [INF] Executed action PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet) in 12.9181ms
2025-08-11 08:07:00.463 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:07:00.469 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 19.9419ms
2025-08-11 08:07:30.452 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:07:30.454 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:07:30.454 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:07:30.454 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:07:30.454 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:07:30.454 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:07:30.454 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:07:30.455 +00:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:07:30.455 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:07:30.455 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:07:30.455 +00:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:07:30.457 +00:00 [INF] Route matched with {action = "GetMyPendingActions", controller = "MaintenanceRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPendingActions(System.String) on controller PersonaXFleet.Controllers.MaintenanceRequestController (PersonaXFleet).
2025-08-11 08:07:30.484 +00:00 [INF] Executed DbCommand (14ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsRead] = CAST(0 AS bit) AND [n].[IsDeleted] = CAST(0 AS bit)
2025-08-11 08:07:30.487 +00:00 [INF] Executed DbCommand (29ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[ActionLink], [n].[CreatedAt], [n].[IsDeleted], [n].[IsRead], [n].[Message], [n].[RelatedEntityId], [n].[Title], [n].[Type], [n].[UserId], [n].[Username]
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsDeleted] = CAST(0 AS bit)
ORDER BY [n].[CreatedAt] DESC
2025-08-11 08:07:30.488 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.Notification, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:07:30.488 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet) in 33.5081ms
2025-08-11 08:07:30.509 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:07:30.510 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType69`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:07:30.514 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 61.4936ms
2025-08-11 08:07:30.514 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet) in 56.7724ms
2025-08-11 08:07:30.516 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:07:30.516 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 61.9886ms
2025-08-11 08:07:30.561 +00:00 [INF] Executed DbCommand (67ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MaintenanceId], [m].[VehicleId], [v].[Make], [v].[Model], [v].[LicensePlate], [m].[RequestType], [m].[Description], [m].[RequestDate], [m].[Status], [m].[Priority], [m].[EstimatedCost], [m].[AdminComments], [m].[RequestedByUserId], [a].[UserName], [m].[Department], [m].[CurrentStage], [r].[Name]
FROM [UserRouteRoles] AS [u]
INNER JOIN [MaintenanceRequests] AS [m] ON [u].[RouteId] = [m].[CurrentRouteId]
INNER JOIN [Vehicles] AS [v] ON [m].[VehicleId] = [v].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RequestedByUserId] = [a].[Id]
LEFT JOIN [Routes] AS [r] ON [m].[CurrentRouteId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0 AND [u].[Role] = [m].[CurrentStage] AND NOT EXISTS (
    SELECT 1
    FROM [MaintenanceTransactions] AS [m0]
    WHERE [m0].[MaintenanceRequestId] = [m].[MaintenanceId] AND [m0].[Action] = [m].[CurrentStage] AND [m0].[UserId] = [u].[UserId] AND [m0].[IsCompleted] = CAST(1 AS bit))
2025-08-11 08:07:30.562 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.MaintenanceRequestDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:07:30.562 +00:00 [INF] Executed action PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet) in 104.8166ms
2025-08-11 08:07:30.562 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:07:30.562 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 108.1752ms
2025-08-11 08:07:45.451 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:07:45.451 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:07:45.451 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:07:45.452 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:07:45.452 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:07:45.452 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:07:45.452 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:07:45.452 +00:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:07:45.452 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:07:45.452 +00:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:07:45.452 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:07:45.452 +00:00 [INF] Route matched with {action = "GetMyPendingActions", controller = "MaintenanceRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPendingActions(System.String) on controller PersonaXFleet.Controllers.MaintenanceRequestController (PersonaXFleet).
2025-08-11 08:07:45.455 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsRead] = CAST(0 AS bit) AND [n].[IsDeleted] = CAST(0 AS bit)
2025-08-11 08:07:45.455 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[ActionLink], [n].[CreatedAt], [n].[IsDeleted], [n].[IsRead], [n].[Message], [n].[RelatedEntityId], [n].[Title], [n].[Type], [n].[UserId], [n].[Username]
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsDeleted] = CAST(0 AS bit)
ORDER BY [n].[CreatedAt] DESC
2025-08-11 08:07:45.457 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType69`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:07:45.458 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet) in 5.7307ms
2025-08-11 08:07:45.459 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:07:45.460 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 9.1398ms
2025-08-11 08:07:45.463 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.Notification, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:07:45.464 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MaintenanceId], [m].[VehicleId], [v].[Make], [v].[Model], [v].[LicensePlate], [m].[RequestType], [m].[Description], [m].[RequestDate], [m].[Status], [m].[Priority], [m].[EstimatedCost], [m].[AdminComments], [m].[RequestedByUserId], [a].[UserName], [m].[Department], [m].[CurrentStage], [r].[Name]
FROM [UserRouteRoles] AS [u]
INNER JOIN [MaintenanceRequests] AS [m] ON [u].[RouteId] = [m].[CurrentRouteId]
INNER JOIN [Vehicles] AS [v] ON [m].[VehicleId] = [v].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RequestedByUserId] = [a].[Id]
LEFT JOIN [Routes] AS [r] ON [m].[CurrentRouteId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0 AND [u].[Role] = [m].[CurrentStage] AND NOT EXISTS (
    SELECT 1
    FROM [MaintenanceTransactions] AS [m0]
    WHERE [m0].[MaintenanceRequestId] = [m].[MaintenanceId] AND [m0].[Action] = [m].[CurrentStage] AND [m0].[UserId] = [u].[UserId] AND [m0].[IsCompleted] = CAST(1 AS bit))
2025-08-11 08:07:45.464 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet) in 11.6381ms
2025-08-11 08:07:45.464 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:07:45.464 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.MaintenanceRequestDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:07:45.464 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 13.3505ms
2025-08-11 08:07:45.466 +00:00 [INF] Executed action PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet) in 13.4744ms
2025-08-11 08:07:45.466 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:07:45.466 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 14.8ms
2025-08-11 08:07:59.453 +00:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7092/api/Auth/activity/ping - null null
2025-08-11 08:07:59.455 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:07:59.455 +00:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7092/api/Auth/activity/ping - 204 null null 2.7901ms
2025-08-11 08:07:59.460 +00:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/activity/ping - application/json 49
2025-08-11 08:07:59.462 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:07:59.462 +00:00 [INF] Executing endpoint 'FleetIdentityServer.Controllers.Auth.PingActivity (PersonaXFleet)'
2025-08-11 08:07:59.462 +00:00 [INF] Route matched with {action = "PingActivity", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PingActivity(FleetIdentityServer.Controllers.PingActivityRequest) on controller FleetIdentityServer.Controllers.Auth (PersonaXFleet).
2025-08-11 08:07:59.479 +00:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Department], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsActive], [a].[LastActivityDate], [a].[LastLoginDate], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[MustChangePassword], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-08-11 08:07:59.483 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Department], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsActive], [a].[LastActivityDate], [a].[LastLoginDate], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[MustChangePassword], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-08-11 08:07:59.489 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p21='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p22='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime2), @p8='?' (DbType = DateTime2), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (DbType = Boolean), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Department] = @p2, [Email] = @p3, [EmailConfirmed] = @p4, [FullName] = @p5, [IsActive] = @p6, [LastActivityDate] = @p7, [LastLoginDate] = @p8, [LockoutEnabled] = @p9, [LockoutEnd] = @p10, [MustChangePassword] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [ProfilePicture] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UserName] = @p20
OUTPUT 1
WHERE [Id] = @p21 AND [ConcurrencyStamp] = @p22;
2025-08-11 08:07:59.489 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType15`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:07:59.489 +00:00 [INF] Executed action FleetIdentityServer.Controllers.Auth.PingActivity (PersonaXFleet) in 26.5412ms
2025-08-11 08:07:59.489 +00:00 [INF] Executed endpoint 'FleetIdentityServer.Controllers.Auth.PingActivity (PersonaXFleet)'
2025-08-11 08:07:59.489 +00:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/activity/ping - 200 null application/json; charset=utf-8 29.8431ms
2025-08-11 08:08:00.446 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:08:00.448 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:08:00.448 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:08:00.448 +00:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:08:00.448 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:08:00.449 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:08:00.449 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:08:00.449 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:08:00.449 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:08:00.449 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:08:00.450 +00:00 [INF] Route matched with {action = "GetMyPendingActions", controller = "MaintenanceRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPendingActions(System.String) on controller PersonaXFleet.Controllers.MaintenanceRequestController (PersonaXFleet).
2025-08-11 08:08:00.450 +00:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:08:00.454 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[ActionLink], [n].[CreatedAt], [n].[IsDeleted], [n].[IsRead], [n].[Message], [n].[RelatedEntityId], [n].[Title], [n].[Type], [n].[UserId], [n].[Username]
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsDeleted] = CAST(0 AS bit)
ORDER BY [n].[CreatedAt] DESC
2025-08-11 08:08:00.456 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.Notification, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:08:00.457 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet) in 8.9608ms
2025-08-11 08:08:00.458 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:08:00.458 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 11.772ms
2025-08-11 08:08:00.459 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsRead] = CAST(0 AS bit) AND [n].[IsDeleted] = CAST(0 AS bit)
2025-08-11 08:08:00.462 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType69`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:08:00.463 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MaintenanceId], [m].[VehicleId], [v].[Make], [v].[Model], [v].[LicensePlate], [m].[RequestType], [m].[Description], [m].[RequestDate], [m].[Status], [m].[Priority], [m].[EstimatedCost], [m].[AdminComments], [m].[RequestedByUserId], [a].[UserName], [m].[Department], [m].[CurrentStage], [r].[Name]
FROM [UserRouteRoles] AS [u]
INNER JOIN [MaintenanceRequests] AS [m] ON [u].[RouteId] = [m].[CurrentRouteId]
INNER JOIN [Vehicles] AS [v] ON [m].[VehicleId] = [v].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RequestedByUserId] = [a].[Id]
LEFT JOIN [Routes] AS [r] ON [m].[CurrentRouteId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0 AND [u].[Role] = [m].[CurrentStage] AND NOT EXISTS (
    SELECT 1
    FROM [MaintenanceTransactions] AS [m0]
    WHERE [m0].[MaintenanceRequestId] = [m].[MaintenanceId] AND [m0].[Action] = [m].[CurrentStage] AND [m0].[UserId] = [u].[UserId] AND [m0].[IsCompleted] = CAST(1 AS bit))
2025-08-11 08:08:00.463 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet) in 13.1546ms
2025-08-11 08:08:00.463 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:08:00.465 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.MaintenanceRequestDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:08:00.466 +00:00 [INF] Executed action PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet) in 15.7435ms
2025-08-11 08:08:00.466 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 17.5173ms
2025-08-11 08:08:00.466 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:08:00.467 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 18.6438ms
2025-08-11 08:08:30.451 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:08:30.452 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:08:30.453 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:08:30.453 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:08:30.453 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:08:30.453 +00:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:08:30.454 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:08:30.455 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:08:30.455 +00:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:08:30.455 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:08:30.457 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:08:30.457 +00:00 [INF] Route matched with {action = "GetMyPendingActions", controller = "MaintenanceRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPendingActions(System.String) on controller PersonaXFleet.Controllers.MaintenanceRequestController (PersonaXFleet).
2025-08-11 08:08:30.499 +00:00 [INF] Executed DbCommand (40ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[ActionLink], [n].[CreatedAt], [n].[IsDeleted], [n].[IsRead], [n].[Message], [n].[RelatedEntityId], [n].[Title], [n].[Type], [n].[UserId], [n].[Username]
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsDeleted] = CAST(0 AS bit)
ORDER BY [n].[CreatedAt] DESC
2025-08-11 08:08:30.501 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.Notification, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:08:30.501 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet) in 47.6621ms
2025-08-11 08:08:30.501 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:08:30.501 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsRead] = CAST(0 AS bit) AND [n].[IsDeleted] = CAST(0 AS bit)
2025-08-11 08:08:30.508 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 57.483ms
2025-08-11 08:08:30.508 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType69`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:08:30.509 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet) in 54.2898ms
2025-08-11 08:08:30.510 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:08:30.512 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 59.1234ms
2025-08-11 08:08:30.546 +00:00 [INF] Executed DbCommand (42ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MaintenanceId], [m].[VehicleId], [v].[Make], [v].[Model], [v].[LicensePlate], [m].[RequestType], [m].[Description], [m].[RequestDate], [m].[Status], [m].[Priority], [m].[EstimatedCost], [m].[AdminComments], [m].[RequestedByUserId], [a].[UserName], [m].[Department], [m].[CurrentStage], [r].[Name]
FROM [UserRouteRoles] AS [u]
INNER JOIN [MaintenanceRequests] AS [m] ON [u].[RouteId] = [m].[CurrentRouteId]
INNER JOIN [Vehicles] AS [v] ON [m].[VehicleId] = [v].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RequestedByUserId] = [a].[Id]
LEFT JOIN [Routes] AS [r] ON [m].[CurrentRouteId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0 AND [u].[Role] = [m].[CurrentStage] AND NOT EXISTS (
    SELECT 1
    FROM [MaintenanceTransactions] AS [m0]
    WHERE [m0].[MaintenanceRequestId] = [m].[MaintenanceId] AND [m0].[Action] = [m].[CurrentStage] AND [m0].[UserId] = [u].[UserId] AND [m0].[IsCompleted] = CAST(1 AS bit))
2025-08-11 08:08:30.546 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.MaintenanceRequestDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:08:30.547 +00:00 [INF] Executed action PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet) in 88.9973ms
2025-08-11 08:08:30.547 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:08:30.547 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 92.0808ms
2025-08-11 08:08:45.459 +00:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7092/api/Auth/activity/ping - null null
2025-08-11 08:08:45.459 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/UserActivity/recent?limit=4 - null null
2025-08-11 08:08:45.462 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:08:45.462 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.UserActivityController.GetRecentActivities (PersonaXFleet)'
2025-08-11 08:08:45.462 +00:00 [INF] Route matched with {action = "GetRecentActivities", controller = "UserActivity"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentActivities(Int32) on controller PersonaXFleet.Controllers.UserActivityController (PersonaXFleet).
2025-08-11 08:08:45.462 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:08:45.462 +00:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7092/api/Auth/activity/ping - 204 null null 3.6204ms
2025-08-11 08:08:45.471 +00:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/activity/ping - application/json 49
2025-08-11 08:08:45.471 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:08:45.471 +00:00 [INF] Executing endpoint 'FleetIdentityServer.Controllers.Auth.PingActivity (PersonaXFleet)'
2025-08-11 08:08:45.471 +00:00 [INF] Route matched with {action = "PingActivity", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PingActivity(FleetIdentityServer.Controllers.PingActivityRequest) on controller FleetIdentityServer.Controllers.Auth (PersonaXFleet).
2025-08-11 08:08:45.479 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:08:45.480 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:08:45.480 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:08:45.480 +00:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:08:45.480 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Department], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsActive], [a].[LastActivityDate], [a].[LastLoginDate], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[MustChangePassword], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-08-11 08:08:45.481 +00:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ActivityType], [t].[Description], [t].[Details], [t].[DurationMs], [t].[EntityId], [t].[EntityType], [t].[ErrorMessage], [t].[IpAddress], [t].[IsSuccessful], [t].[Module], [t].[NewValues], [t].[OldValues], [t].[PageUrl], [t].[SessionId], [t].[Timestamp], [t].[UserAgent], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Department], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsActive], [a].[LastActivityDate], [a].[LastLoginDate], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[MustChangePassword], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [u].[Id], [u].[ActivityType], [u].[Description], [u].[Details], [u].[DurationMs], [u].[EntityId], [u].[EntityType], [u].[ErrorMessage], [u].[IpAddress], [u].[IsSuccessful], [u].[Module], [u].[NewValues], [u].[OldValues], [u].[PageUrl], [u].[SessionId], [u].[Timestamp], [u].[UserAgent], [u].[UserId]
    FROM [UserActivities] AS [u]
    ORDER BY [u].[Timestamp] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
ORDER BY [t].[Timestamp] DESC
2025-08-11 08:08:45.481 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.UserActivity, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:08:45.484 +00:00 [INF] Executed action PersonaXFleet.Controllers.UserActivityController.GetRecentActivities (PersonaXFleet) in 21.4395ms
2025-08-11 08:08:45.484 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:08:45.487 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.UserActivityController.GetRecentActivities (PersonaXFleet)'
2025-08-11 08:08:45.488 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:08:45.488 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:08:45.489 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/UserActivity/recent?limit=4 - 200 null application/json; charset=utf-8 29.355ms
2025-08-11 08:08:45.489 +00:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:08:45.491 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Department], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsActive], [a].[LastActivityDate], [a].[LastLoginDate], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[MustChangePassword], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-08-11 08:08:45.491 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:08:45.492 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:08:45.492 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:08:45.492 +00:00 [INF] Route matched with {action = "GetMyPendingActions", controller = "MaintenanceRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPendingActions(System.String) on controller PersonaXFleet.Controllers.MaintenanceRequestController (PersonaXFleet).
2025-08-11 08:08:45.495 +00:00 [INF] Executed DbCommand (11ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[ActionLink], [n].[CreatedAt], [n].[IsDeleted], [n].[IsRead], [n].[Message], [n].[RelatedEntityId], [n].[Title], [n].[Type], [n].[UserId], [n].[Username]
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsDeleted] = CAST(0 AS bit)
ORDER BY [n].[CreatedAt] DESC
2025-08-11 08:08:45.503 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.Notification, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:08:45.505 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet) in 24.7654ms
2025-08-11 08:08:45.505 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:08:45.505 +00:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsRead] = CAST(0 AS bit) AND [n].[IsDeleted] = CAST(0 AS bit)
2025-08-11 08:08:45.505 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 27.918ms
2025-08-11 08:08:45.515 +00:00 [INF] Executed DbCommand (17ms) [Parameters=[@p21='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p22='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime2), @p8='?' (DbType = DateTime2), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (DbType = Boolean), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Department] = @p2, [Email] = @p3, [EmailConfirmed] = @p4, [FullName] = @p5, [IsActive] = @p6, [LastActivityDate] = @p7, [LastLoginDate] = @p8, [LockoutEnabled] = @p9, [LockoutEnd] = @p10, [MustChangePassword] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [ProfilePicture] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UserName] = @p20
OUTPUT 1
WHERE [Id] = @p21 AND [ConcurrencyStamp] = @p22;
2025-08-11 08:08:45.527 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MaintenanceId], [m].[VehicleId], [v].[Make], [v].[Model], [v].[LicensePlate], [m].[RequestType], [m].[Description], [m].[RequestDate], [m].[Status], [m].[Priority], [m].[EstimatedCost], [m].[AdminComments], [m].[RequestedByUserId], [a].[UserName], [m].[Department], [m].[CurrentStage], [r].[Name]
FROM [UserRouteRoles] AS [u]
INNER JOIN [MaintenanceRequests] AS [m] ON [u].[RouteId] = [m].[CurrentRouteId]
INNER JOIN [Vehicles] AS [v] ON [m].[VehicleId] = [v].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RequestedByUserId] = [a].[Id]
LEFT JOIN [Routes] AS [r] ON [m].[CurrentRouteId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0 AND [u].[Role] = [m].[CurrentStage] AND NOT EXISTS (
    SELECT 1
    FROM [MaintenanceTransactions] AS [m0]
    WHERE [m0].[MaintenanceRequestId] = [m].[MaintenanceId] AND [m0].[Action] = [m].[CurrentStage] AND [m0].[UserId] = [u].[UserId] AND [m0].[IsCompleted] = CAST(1 AS bit))
2025-08-11 08:08:45.530 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType15`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:08:45.530 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType69`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:08:45.530 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.MaintenanceRequestDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:08:45.530 +00:00 [INF] Executed action FleetIdentityServer.Controllers.Auth.PingActivity (PersonaXFleet) in 58.9891ms
2025-08-11 08:08:45.531 +00:00 [INF] Executed endpoint 'FleetIdentityServer.Controllers.Auth.PingActivity (PersonaXFleet)'
2025-08-11 08:08:45.531 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet) in 41.7269ms
2025-08-11 08:08:45.531 +00:00 [INF] Executed action PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet) in 35.5705ms
2025-08-11 08:08:45.531 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:08:45.531 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:08:45.531 +00:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/activity/ping - 200 null application/json; charset=utf-8 60.5855ms
2025-08-11 08:08:45.532 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 40.7964ms
2025-08-11 08:08:45.532 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 48.7275ms
2025-08-11 08:09:00.448 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:09:00.448 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:09:00.448 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:09:00.448 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:09:00.449 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:09:00.449 +00:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:09:00.449 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:09:00.449 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:09:00.449 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:09:00.449 +00:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:09:00.449 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:09:00.449 +00:00 [INF] Route matched with {action = "GetMyPendingActions", controller = "MaintenanceRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPendingActions(System.String) on controller PersonaXFleet.Controllers.MaintenanceRequestController (PersonaXFleet).
2025-08-11 08:09:00.452 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsRead] = CAST(0 AS bit) AND [n].[IsDeleted] = CAST(0 AS bit)
2025-08-11 08:09:00.452 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[ActionLink], [n].[CreatedAt], [n].[IsDeleted], [n].[IsRead], [n].[Message], [n].[RelatedEntityId], [n].[Title], [n].[Type], [n].[UserId], [n].[Username]
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsDeleted] = CAST(0 AS bit)
ORDER BY [n].[CreatedAt] DESC
2025-08-11 08:09:00.454 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType69`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:09:00.454 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet) in 5.4039ms
2025-08-11 08:09:00.455 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:09:00.455 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.Notification, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:09:00.455 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 7.1265ms
2025-08-11 08:09:00.456 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet) in 6.5533ms
2025-08-11 08:09:00.456 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:09:00.456 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 8.3997ms
2025-08-11 08:09:00.469 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MaintenanceId], [m].[VehicleId], [v].[Make], [v].[Model], [v].[LicensePlate], [m].[RequestType], [m].[Description], [m].[RequestDate], [m].[Status], [m].[Priority], [m].[EstimatedCost], [m].[AdminComments], [m].[RequestedByUserId], [a].[UserName], [m].[Department], [m].[CurrentStage], [r].[Name]
FROM [UserRouteRoles] AS [u]
INNER JOIN [MaintenanceRequests] AS [m] ON [u].[RouteId] = [m].[CurrentRouteId]
INNER JOIN [Vehicles] AS [v] ON [m].[VehicleId] = [v].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RequestedByUserId] = [a].[Id]
LEFT JOIN [Routes] AS [r] ON [m].[CurrentRouteId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0 AND [u].[Role] = [m].[CurrentStage] AND NOT EXISTS (
    SELECT 1
    FROM [MaintenanceTransactions] AS [m0]
    WHERE [m0].[MaintenanceRequestId] = [m].[MaintenanceId] AND [m0].[Action] = [m].[CurrentStage] AND [m0].[UserId] = [u].[UserId] AND [m0].[IsCompleted] = CAST(1 AS bit))
2025-08-11 08:09:00.471 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.MaintenanceRequestDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:09:00.471 +00:00 [INF] Executed action PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet) in 22.2658ms
2025-08-11 08:09:00.471 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:09:00.472 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 23.1328ms
2025-08-11 08:09:45.450 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:09:45.451 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:09:45.452 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:09:45.454 +00:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:09:45.470 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:09:45.470 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:09:45.471 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:09:45.471 +00:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:09:45.482 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:09:45.484 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:09:45.485 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:09:45.486 +00:00 [INF] Route matched with {action = "GetMyPendingActions", controller = "MaintenanceRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPendingActions(System.String) on controller PersonaXFleet.Controllers.MaintenanceRequestController (PersonaXFleet).
2025-08-11 08:09:45.508 +00:00 [INF] Executed DbCommand (15ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsRead] = CAST(0 AS bit) AND [n].[IsDeleted] = CAST(0 AS bit)
2025-08-11 08:09:45.508 +00:00 [INF] Executed DbCommand (28ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[ActionLink], [n].[CreatedAt], [n].[IsDeleted], [n].[IsRead], [n].[Message], [n].[RelatedEntityId], [n].[Title], [n].[Type], [n].[UserId], [n].[Username]
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsDeleted] = CAST(0 AS bit)
ORDER BY [n].[CreatedAt] DESC
2025-08-11 08:09:45.508 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.Notification, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:09:45.508 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet) in 53.5727ms
2025-08-11 08:09:45.514 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:09:45.515 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 65.5132ms
2025-08-11 08:09:45.518 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType69`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:09:45.519 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet) in 39.9321ms
2025-08-11 08:09:45.519 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:09:45.520 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 49.5924ms
2025-08-11 08:09:45.539 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:09:45.539 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:09:45.539 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:09:45.539 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:09:45.539 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:09:45.539 +00:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:09:45.552 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:09:45.553 +00:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:09:45.569 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[ActionLink], [n].[CreatedAt], [n].[IsDeleted], [n].[IsRead], [n].[Message], [n].[RelatedEntityId], [n].[Title], [n].[Type], [n].[UserId], [n].[Username]
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsDeleted] = CAST(0 AS bit)
ORDER BY [n].[CreatedAt] DESC
2025-08-11 08:09:45.569 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsRead] = CAST(0 AS bit) AND [n].[IsDeleted] = CAST(0 AS bit)
2025-08-11 08:09:45.573 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.Notification, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:09:45.573 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet) in 33.8769ms
2025-08-11 08:09:45.574 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType69`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:09:45.574 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:09:45.574 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet) in 19.1087ms
2025-08-11 08:09:45.575 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:09:45.578 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 38.9206ms
2025-08-11 08:09:45.578 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 38.9986ms
2025-08-11 08:09:45.610 +00:00 [INF] Executed DbCommand (85ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MaintenanceId], [m].[VehicleId], [v].[Make], [v].[Model], [v].[LicensePlate], [m].[RequestType], [m].[Description], [m].[RequestDate], [m].[Status], [m].[Priority], [m].[EstimatedCost], [m].[AdminComments], [m].[RequestedByUserId], [a].[UserName], [m].[Department], [m].[CurrentStage], [r].[Name]
FROM [UserRouteRoles] AS [u]
INNER JOIN [MaintenanceRequests] AS [m] ON [u].[RouteId] = [m].[CurrentRouteId]
INNER JOIN [Vehicles] AS [v] ON [m].[VehicleId] = [v].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RequestedByUserId] = [a].[Id]
LEFT JOIN [Routes] AS [r] ON [m].[CurrentRouteId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0 AND [u].[Role] = [m].[CurrentStage] AND NOT EXISTS (
    SELECT 1
    FROM [MaintenanceTransactions] AS [m0]
    WHERE [m0].[MaintenanceRequestId] = [m].[MaintenanceId] AND [m0].[Action] = [m].[CurrentStage] AND [m0].[UserId] = [u].[UserId] AND [m0].[IsCompleted] = CAST(1 AS bit))
2025-08-11 08:09:45.610 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.MaintenanceRequestDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:09:45.611 +00:00 [INF] Executed action PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet) in 123.687ms
2025-08-11 08:09:45.611 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:09:45.611 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 129.156ms
2025-08-11 08:09:45.614 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:09:45.614 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:09:45.614 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:09:45.614 +00:00 [INF] Route matched with {action = "GetMyPendingActions", controller = "MaintenanceRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPendingActions(System.String) on controller PersonaXFleet.Controllers.MaintenanceRequestController (PersonaXFleet).
2025-08-11 08:09:45.619 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MaintenanceId], [m].[VehicleId], [v].[Make], [v].[Model], [v].[LicensePlate], [m].[RequestType], [m].[Description], [m].[RequestDate], [m].[Status], [m].[Priority], [m].[EstimatedCost], [m].[AdminComments], [m].[RequestedByUserId], [a].[UserName], [m].[Department], [m].[CurrentStage], [r].[Name]
FROM [UserRouteRoles] AS [u]
INNER JOIN [MaintenanceRequests] AS [m] ON [u].[RouteId] = [m].[CurrentRouteId]
INNER JOIN [Vehicles] AS [v] ON [m].[VehicleId] = [v].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RequestedByUserId] = [a].[Id]
LEFT JOIN [Routes] AS [r] ON [m].[CurrentRouteId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0 AND [u].[Role] = [m].[CurrentStage] AND NOT EXISTS (
    SELECT 1
    FROM [MaintenanceTransactions] AS [m0]
    WHERE [m0].[MaintenanceRequestId] = [m].[MaintenanceId] AND [m0].[Action] = [m].[CurrentStage] AND [m0].[UserId] = [u].[UserId] AND [m0].[IsCompleted] = CAST(1 AS bit))
2025-08-11 08:09:45.621 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.MaintenanceRequestDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:09:45.621 +00:00 [INF] Executed action PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet) in 7.3455ms
2025-08-11 08:09:45.622 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:09:45.622 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 9.5998ms
2025-08-11 08:09:59.453 +00:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7092/api/Auth/activity/ping - null null
2025-08-11 08:09:59.454 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:09:59.454 +00:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7092/api/Auth/activity/ping - 204 null null 2.5206ms
2025-08-11 08:09:59.461 +00:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/activity/ping - application/json 49
2025-08-11 08:09:59.462 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:09:59.463 +00:00 [INF] Executing endpoint 'FleetIdentityServer.Controllers.Auth.PingActivity (PersonaXFleet)'
2025-08-11 08:09:59.463 +00:00 [INF] Route matched with {action = "PingActivity", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PingActivity(FleetIdentityServer.Controllers.PingActivityRequest) on controller FleetIdentityServer.Controllers.Auth (PersonaXFleet).
2025-08-11 08:09:59.486 +00:00 [INF] Executed DbCommand (17ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Department], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsActive], [a].[LastActivityDate], [a].[LastLoginDate], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[MustChangePassword], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-08-11 08:09:59.504 +00:00 [INF] Executed DbCommand (16ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Department], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsActive], [a].[LastActivityDate], [a].[LastLoginDate], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[MustChangePassword], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-08-11 08:09:59.530 +00:00 [INF] Executed DbCommand (22ms) [Parameters=[@p21='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p22='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime2), @p8='?' (DbType = DateTime2), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (DbType = Boolean), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Department] = @p2, [Email] = @p3, [EmailConfirmed] = @p4, [FullName] = @p5, [IsActive] = @p6, [LastActivityDate] = @p7, [LastLoginDate] = @p8, [LockoutEnabled] = @p9, [LockoutEnd] = @p10, [MustChangePassword] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [ProfilePicture] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UserName] = @p20
OUTPUT 1
WHERE [Id] = @p21 AND [ConcurrencyStamp] = @p22;
2025-08-11 08:09:59.530 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType15`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:09:59.530 +00:00 [INF] Executed action FleetIdentityServer.Controllers.Auth.PingActivity (PersonaXFleet) in 67.2666ms
2025-08-11 08:09:59.530 +00:00 [INF] Executed endpoint 'FleetIdentityServer.Controllers.Auth.PingActivity (PersonaXFleet)'
2025-08-11 08:09:59.531 +00:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/activity/ping - 200 null application/json; charset=utf-8 71.9177ms
2025-08-11 08:10:45.444 +00:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7092/api/Auth/activity/ping - null null
2025-08-11 08:10:45.444 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:10:45.444 +00:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7092/api/Auth/activity/ping - 204 null null 0.4109ms
2025-08-11 08:10:45.458 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:10:45.461 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:10:45.462 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:10:45.462 +00:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:10:45.487 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:10:45.487 +00:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/activity/ping - application/json 49
2025-08-11 08:10:45.488 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:10:45.488 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:10:45.488 +00:00 [INF] Executing endpoint 'FleetIdentityServer.Controllers.Auth.PingActivity (PersonaXFleet)'
2025-08-11 08:10:45.488 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:10:45.488 +00:00 [INF] Route matched with {action = "PingActivity", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PingActivity(FleetIdentityServer.Controllers.PingActivityRequest) on controller FleetIdentityServer.Controllers.Auth (PersonaXFleet).
2025-08-11 08:10:45.488 +00:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:10:45.519 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/UserActivity/recent?limit=4 - null null
2025-08-11 08:10:45.520 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:10:45.521 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.UserActivityController.GetRecentActivities (PersonaXFleet)'
2025-08-11 08:10:45.522 +00:00 [INF] Route matched with {action = "GetRecentActivities", controller = "UserActivity"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentActivities(Int32) on controller PersonaXFleet.Controllers.UserActivityController (PersonaXFleet).
2025-08-11 08:10:45.522 +00:00 [INF] Executed DbCommand (31ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Department], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsActive], [a].[LastActivityDate], [a].[LastLoginDate], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[MustChangePassword], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-08-11 08:10:45.523 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:10:45.526 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:10:45.526 +00:00 [INF] Executed DbCommand (49ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[ActionLink], [n].[CreatedAt], [n].[IsDeleted], [n].[IsRead], [n].[Message], [n].[RelatedEntityId], [n].[Title], [n].[Type], [n].[UserId], [n].[Username]
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsDeleted] = CAST(0 AS bit)
ORDER BY [n].[CreatedAt] DESC
2025-08-11 08:10:45.528 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:10:45.529 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.Notification, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:10:45.530 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet) in 67.4469ms
2025-08-11 08:10:45.530 +00:00 [INF] Route matched with {action = "GetMyPendingActions", controller = "MaintenanceRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPendingActions(System.String) on controller PersonaXFleet.Controllers.MaintenanceRequestController (PersonaXFleet).
2025-08-11 08:10:45.530 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:10:45.531 +00:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsRead] = CAST(0 AS bit) AND [n].[IsDeleted] = CAST(0 AS bit)
2025-08-11 08:10:45.532 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 74.356ms
2025-08-11 08:10:45.532 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType69`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:10:45.532 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet) in 43.964ms
2025-08-11 08:10:45.532 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:10:45.532 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 44.8177ms
2025-08-11 08:10:45.534 +00:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Department], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsActive], [a].[LastActivityDate], [a].[LastLoginDate], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[MustChangePassword], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-08-11 08:10:45.551 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:10:45.552 +00:00 [INF] Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ActivityType], [t].[Description], [t].[Details], [t].[DurationMs], [t].[EntityId], [t].[EntityType], [t].[ErrorMessage], [t].[IpAddress], [t].[IsSuccessful], [t].[Module], [t].[NewValues], [t].[OldValues], [t].[PageUrl], [t].[SessionId], [t].[Timestamp], [t].[UserAgent], [t].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Department], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsActive], [a].[LastActivityDate], [a].[LastLoginDate], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[MustChangePassword], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [u].[Id], [u].[ActivityType], [u].[Description], [u].[Details], [u].[DurationMs], [u].[EntityId], [u].[EntityType], [u].[ErrorMessage], [u].[IpAddress], [u].[IsSuccessful], [u].[Module], [u].[NewValues], [u].[OldValues], [u].[PageUrl], [u].[SessionId], [u].[Timestamp], [u].[UserAgent], [u].[UserId]
    FROM [UserActivities] AS [u]
    ORDER BY [u].[Timestamp] DESC
) AS [t]
INNER JOIN [AspNetUsers] AS [a] ON [t].[UserId] = [a].[Id]
ORDER BY [t].[Timestamp] DESC
2025-08-11 08:10:45.552 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:10:45.554 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:10:45.554 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:10:45.554 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:10:45.554 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:10:45.554 +00:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:10:45.554 +00:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:10:45.564 +00:00 [INF] Executed DbCommand (22ms) [Parameters=[@p21='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p22='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime2), @p8='?' (DbType = DateTime2), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (DbType = Boolean), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Department] = @p2, [Email] = @p3, [EmailConfirmed] = @p4, [FullName] = @p5, [IsActive] = @p6, [LastActivityDate] = @p7, [LastLoginDate] = @p8, [LockoutEnabled] = @p9, [LockoutEnd] = @p10, [MustChangePassword] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [ProfilePicture] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UserName] = @p20
OUTPUT 1
WHERE [Id] = @p21 AND [ConcurrencyStamp] = @p22;
2025-08-11 08:10:45.564 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType15`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:10:45.565 +00:00 [INF] Executed action FleetIdentityServer.Controllers.Auth.PingActivity (PersonaXFleet) in 76.6577ms
2025-08-11 08:10:45.565 +00:00 [INF] Executed endpoint 'FleetIdentityServer.Controllers.Auth.PingActivity (PersonaXFleet)'
2025-08-11 08:10:45.565 +00:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/activity/ping - 200 null application/json; charset=utf-8 77.4746ms
2025-08-11 08:10:45.569 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[ActionLink], [n].[CreatedAt], [n].[IsDeleted], [n].[IsRead], [n].[Message], [n].[RelatedEntityId], [n].[Title], [n].[Type], [n].[UserId], [n].[Username]
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsDeleted] = CAST(0 AS bit)
ORDER BY [n].[CreatedAt] DESC
2025-08-11 08:10:45.570 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.UserActivity, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:10:45.573 +00:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsRead] = CAST(0 AS bit) AND [n].[IsDeleted] = CAST(0 AS bit)
2025-08-11 08:10:45.576 +00:00 [INF] Executed action PersonaXFleet.Controllers.UserActivityController.GetRecentActivities (PersonaXFleet) in 54.5411ms
2025-08-11 08:10:45.577 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.UserActivityController.GetRecentActivities (PersonaXFleet)'
2025-08-11 08:10:45.590 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType69`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:10:45.590 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet) in 35.7975ms
2025-08-11 08:10:45.595 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:10:45.595 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/UserActivity/recent?limit=4 - 200 null application/json; charset=utf-8 77.4171ms
2025-08-11 08:10:45.596 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.Notification, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:10:45.597 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet) in 42.3981ms
2025-08-11 08:10:45.597 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:10:45.601 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 48.3571ms
2025-08-11 08:10:45.601 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 50.0263ms
2025-08-11 08:10:45.635 +00:00 [INF] Executed DbCommand (89ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MaintenanceId], [m].[VehicleId], [v].[Make], [v].[Model], [v].[LicensePlate], [m].[RequestType], [m].[Description], [m].[RequestDate], [m].[Status], [m].[Priority], [m].[EstimatedCost], [m].[AdminComments], [m].[RequestedByUserId], [a].[UserName], [m].[Department], [m].[CurrentStage], [r].[Name]
FROM [UserRouteRoles] AS [u]
INNER JOIN [MaintenanceRequests] AS [m] ON [u].[RouteId] = [m].[CurrentRouteId]
INNER JOIN [Vehicles] AS [v] ON [m].[VehicleId] = [v].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RequestedByUserId] = [a].[Id]
LEFT JOIN [Routes] AS [r] ON [m].[CurrentRouteId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0 AND [u].[Role] = [m].[CurrentStage] AND NOT EXISTS (
    SELECT 1
    FROM [MaintenanceTransactions] AS [m0]
    WHERE [m0].[MaintenanceRequestId] = [m].[MaintenanceId] AND [m0].[Action] = [m].[CurrentStage] AND [m0].[UserId] = [u].[UserId] AND [m0].[IsCompleted] = CAST(1 AS bit))
2025-08-11 08:10:45.636 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.MaintenanceRequestDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:10:45.636 +00:00 [INF] Executed action PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet) in 105.0349ms
2025-08-11 08:10:45.636 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:10:45.636 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 113.3484ms
2025-08-11 08:10:45.639 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:10:45.640 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:10:45.640 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:10:45.640 +00:00 [INF] Route matched with {action = "GetMyPendingActions", controller = "MaintenanceRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPendingActions(System.String) on controller PersonaXFleet.Controllers.MaintenanceRequestController (PersonaXFleet).
2025-08-11 08:10:45.648 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MaintenanceId], [m].[VehicleId], [v].[Make], [v].[Model], [v].[LicensePlate], [m].[RequestType], [m].[Description], [m].[RequestDate], [m].[Status], [m].[Priority], [m].[EstimatedCost], [m].[AdminComments], [m].[RequestedByUserId], [a].[UserName], [m].[Department], [m].[CurrentStage], [r].[Name]
FROM [UserRouteRoles] AS [u]
INNER JOIN [MaintenanceRequests] AS [m] ON [u].[RouteId] = [m].[CurrentRouteId]
INNER JOIN [Vehicles] AS [v] ON [m].[VehicleId] = [v].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RequestedByUserId] = [a].[Id]
LEFT JOIN [Routes] AS [r] ON [m].[CurrentRouteId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0 AND [u].[Role] = [m].[CurrentStage] AND NOT EXISTS (
    SELECT 1
    FROM [MaintenanceTransactions] AS [m0]
    WHERE [m0].[MaintenanceRequestId] = [m].[MaintenanceId] AND [m0].[Action] = [m].[CurrentStage] AND [m0].[UserId] = [u].[UserId] AND [m0].[IsCompleted] = CAST(1 AS bit))
2025-08-11 08:10:45.650 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.MaintenanceRequestDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:10:45.650 +00:00 [INF] Executed action PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet) in 10.3478ms
2025-08-11 08:10:45.650 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:10:45.651 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 11.6504ms
2025-08-11 08:11:04.740 +00:00 [INF] Executed DbCommand (11ms) [Parameters=[@__cutoffDate_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Department], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsActive], [a].[LastActivityDate], [a].[LastLoginDate], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[MustChangePassword], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[IsActive] = CAST(1 AS bit) AND [a].[LastActivityDate] < @__cutoffDate_0
2025-08-11 08:11:45.445 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:11:45.446 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:11:45.446 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:11:45.446 +00:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:11:45.447 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:11:45.452 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:11:45.453 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:11:45.453 +00:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:11:45.482 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:11:45.482 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:11:45.489 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:11:45.489 +00:00 [INF] Route matched with {action = "GetMyPendingActions", controller = "MaintenanceRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPendingActions(System.String) on controller PersonaXFleet.Controllers.MaintenanceRequestController (PersonaXFleet).
2025-08-11 08:11:45.494 +00:00 [INF] Executed DbCommand (40ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[ActionLink], [n].[CreatedAt], [n].[IsDeleted], [n].[IsRead], [n].[Message], [n].[RelatedEntityId], [n].[Title], [n].[Type], [n].[UserId], [n].[Username]
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsDeleted] = CAST(0 AS bit)
ORDER BY [n].[CreatedAt] DESC
2025-08-11 08:11:45.494 +00:00 [INF] Executed DbCommand (32ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsRead] = CAST(0 AS bit) AND [n].[IsDeleted] = CAST(0 AS bit)
2025-08-11 08:11:45.497 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.Notification, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:11:45.497 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType69`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:11:45.497 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet) in 50.3476ms
2025-08-11 08:11:45.497 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:11:45.497 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet) in 43.7855ms
2025-08-11 08:11:45.497 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:11:45.497 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 50.4472ms
2025-08-11 08:11:45.497 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 51.8314ms
2025-08-11 08:11:45.508 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:11:45.508 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:11:45.508 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:11:45.508 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:11:45.508 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:11:45.508 +00:00 [INF] Route matched with {action = "GetUserNotifications", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserNotifications(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:11:45.508 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:11:45.513 +00:00 [INF] Route matched with {action = "GetUnreadCount", controller = "Notifications"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCount(System.String) on controller PersonaXFleet.Controllers.NotificationsController (PersonaXFleet).
2025-08-11 08:11:45.528 +00:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsRead] = CAST(0 AS bit) AND [n].[IsDeleted] = CAST(0 AS bit)
2025-08-11 08:11:45.538 +00:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[ActionLink], [n].[CreatedAt], [n].[IsDeleted], [n].[IsRead], [n].[Message], [n].[RelatedEntityId], [n].[Title], [n].[Type], [n].[UserId], [n].[Username]
FROM [Notifications] AS [n]
WHERE [n].[UserId] = @__userId_0 AND [n].[IsDeleted] = CAST(0 AS bit)
ORDER BY [n].[CreatedAt] DESC
2025-08-11 08:11:45.547 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.Models.Notification, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:11:45.547 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet) in 34.8051ms
2025-08-11 08:11:45.547 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUserNotifications (PersonaXFleet)'
2025-08-11 08:11:45.542 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType69`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:11:45.553 +00:00 [INF] Executed action PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet) in 40.0666ms
2025-08-11 08:11:45.553 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.NotificationsController.GetUnreadCount (PersonaXFleet)'
2025-08-11 08:11:45.597 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications/unread-count?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 88.8631ms
2025-08-11 08:11:45.597 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/Notifications?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 88.9032ms
2025-08-11 08:11:45.642 +00:00 [INF] Executed DbCommand (126ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MaintenanceId], [m].[VehicleId], [v].[Make], [v].[Model], [v].[LicensePlate], [m].[RequestType], [m].[Description], [m].[RequestDate], [m].[Status], [m].[Priority], [m].[EstimatedCost], [m].[AdminComments], [m].[RequestedByUserId], [a].[UserName], [m].[Department], [m].[CurrentStage], [r].[Name]
FROM [UserRouteRoles] AS [u]
INNER JOIN [MaintenanceRequests] AS [m] ON [u].[RouteId] = [m].[CurrentRouteId]
INNER JOIN [Vehicles] AS [v] ON [m].[VehicleId] = [v].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RequestedByUserId] = [a].[Id]
LEFT JOIN [Routes] AS [r] ON [m].[CurrentRouteId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0 AND [u].[Role] = [m].[CurrentStage] AND NOT EXISTS (
    SELECT 1
    FROM [MaintenanceTransactions] AS [m0]
    WHERE [m0].[MaintenanceRequestId] = [m].[MaintenanceId] AND [m0].[Action] = [m].[CurrentStage] AND [m0].[UserId] = [u].[UserId] AND [m0].[IsCompleted] = CAST(1 AS bit))
2025-08-11 08:11:45.642 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.MaintenanceRequestDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:11:45.643 +00:00 [INF] Executed action PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet) in 153.7275ms
2025-08-11 08:11:45.643 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:11:45.643 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 162.4066ms
2025-08-11 08:11:45.646 +00:00 [INF] Request starting HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - null null
2025-08-11 08:11:45.647 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:11:45.647 +00:00 [INF] Executing endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:11:45.647 +00:00 [INF] Route matched with {action = "GetMyPendingActions", controller = "MaintenanceRequest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPendingActions(System.String) on controller PersonaXFleet.Controllers.MaintenanceRequestController (PersonaXFleet).
2025-08-11 08:11:45.659 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[MaintenanceId], [m].[VehicleId], [v].[Make], [v].[Model], [v].[LicensePlate], [m].[RequestType], [m].[Description], [m].[RequestDate], [m].[Status], [m].[Priority], [m].[EstimatedCost], [m].[AdminComments], [m].[RequestedByUserId], [a].[UserName], [m].[Department], [m].[CurrentStage], [r].[Name]
FROM [UserRouteRoles] AS [u]
INNER JOIN [MaintenanceRequests] AS [m] ON [u].[RouteId] = [m].[CurrentRouteId]
INNER JOIN [Vehicles] AS [v] ON [m].[VehicleId] = [v].[Id]
INNER JOIN [AspNetUsers] AS [a] ON [m].[RequestedByUserId] = [a].[Id]
LEFT JOIN [Routes] AS [r] ON [m].[CurrentRouteId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0 AND [u].[Role] = [m].[CurrentStage] AND NOT EXISTS (
    SELECT 1
    FROM [MaintenanceTransactions] AS [m0]
    WHERE [m0].[MaintenanceRequestId] = [m].[MaintenanceId] AND [m0].[Action] = [m].[CurrentStage] AND [m0].[UserId] = [u].[UserId] AND [m0].[IsCompleted] = CAST(1 AS bit))
2025-08-11 08:11:45.661 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PersonaXFleet.DTOs.MaintenanceRequestDto, PersonaXFleet, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-11 08:11:45.661 +00:00 [INF] Executed action PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet) in 13.5056ms
2025-08-11 08:11:45.661 +00:00 [INF] Executed endpoint 'PersonaXFleet.Controllers.MaintenanceRequestController.GetMyPendingActions (PersonaXFleet)'
2025-08-11 08:11:45.661 +00:00 [INF] Request finished HTTP/2 GET https://localhost:7092/api/MaintenanceRequest/my-pending-actions?userId=afd55307-8926-4ef6-bb7a-14476405082d - 200 null application/json; charset=utf-8 15.178ms
2025-08-11 08:11:59.444 +00:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7092/api/Auth/activity/ping - null null
2025-08-11 08:11:59.445 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:11:59.445 +00:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7092/api/Auth/activity/ping - 204 null null 0.7122ms
2025-08-11 08:11:59.447 +00:00 [INF] Request starting HTTP/2 POST https://localhost:7092/api/Auth/activity/ping - application/json 49
2025-08-11 08:11:59.447 +00:00 [INF] CORS policy execution successful.
2025-08-11 08:11:59.447 +00:00 [INF] Executing endpoint 'FleetIdentityServer.Controllers.Auth.PingActivity (PersonaXFleet)'
2025-08-11 08:11:59.447 +00:00 [INF] Route matched with {action = "PingActivity", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PingActivity(FleetIdentityServer.Controllers.PingActivityRequest) on controller FleetIdentityServer.Controllers.Auth (PersonaXFleet).
2025-08-11 08:11:59.451 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Department], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsActive], [a].[LastActivityDate], [a].[LastLoginDate], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[MustChangePassword], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-08-11 08:11:59.455 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Department], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[IsActive], [a].[LastActivityDate], [a].[LastLoginDate], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[MustChangePassword], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[ProfilePicture], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-08-11 08:11:59.463 +00:00 [INF] Executed DbCommand (8ms) [Parameters=[@p21='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p22='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime2), @p8='?' (DbType = DateTime2), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (DbType = Boolean), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Department] = @p2, [Email] = @p3, [EmailConfirmed] = @p4, [FullName] = @p5, [IsActive] = @p6, [LastActivityDate] = @p7, [LastLoginDate] = @p8, [LockoutEnabled] = @p9, [LockoutEnd] = @p10, [MustChangePassword] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [ProfilePicture] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UserName] = @p20
OUTPUT 1
WHERE [Id] = @p21 AND [ConcurrencyStamp] = @p22;
2025-08-11 08:11:59.464 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType15`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-11 08:11:59.464 +00:00 [INF] Executed action FleetIdentityServer.Controllers.Auth.PingActivity (PersonaXFleet) in 16.3991ms
2025-08-11 08:11:59.464 +00:00 [INF] Executed endpoint 'FleetIdentityServer.Controllers.Auth.PingActivity (PersonaXFleet)'
2025-08-11 08:11:59.464 +00:00 [INF] Request finished HTTP/2 POST https://localhost:7092/api/Auth/activity/ping - 200 null application/json; charset=utf-8 17.3351ms
